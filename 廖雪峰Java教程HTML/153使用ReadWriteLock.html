<div class="uk-flex-item-1" style="padding-left:15px; ">
							<div id="x-content-top">
								<!-- __snippet__.contentTop -->
																<!-- // __snippet__.contentTop -->
							</div>
							<div id="x-content">
								    <h4>&#20351;&#29992;ReadWriteLock</h4>
    <div class="x-wiki-info">
    	<span>Reads: 14494</span>
    	<a href="/manage/wiki/wikipage_update?id=1306581002092578" target="_blank" class="x-can-edit uk-text-danger">Edit</a>
</div>

    <hr>

    <div class="x-wiki-content x-main-content">
<p>&#21069;&#38754;&#35762;&#21040;&#30340;<code>ReentrantLock</code>&#20445;&#35777;&#20102;&#21482;&#26377;&#19968;&#20010;&#32447;&#31243;&#21487;&#20197;&#25191;&#34892;&#20020;&#30028;&#21306;&#20195;&#30721;&#65306;</p>
<pre><code>public class Counter {
    private final Lock lock = new ReentrantLock();
    private int[] counts = new int[10];

    public void inc(int index) {
        lock.lock();
        try {
            counts[index] += 1;
        } finally {
            lock.unlock();
        }
    }

    public int[] get() {
        lock.lock();
        try {
            return Arrays.copyOf(counts, counts.length);
        } finally {
            lock.unlock();
        }
    }
}
</code></pre>
<p>&#20294;&#26159;&#26377;&#20123;&#26102;&#20505;&#65292;&#36825;&#31181;&#20445;&#25252;&#26377;&#28857;&#36807;&#22836;&#12290;&#22240;&#20026;&#25105;&#20204;&#21457;&#29616;&#65292;&#20219;&#20309;&#26102;&#21051;&#65292;&#21482;&#20801;&#35768;&#19968;&#20010;&#32447;&#31243;&#20462;&#25913;&#65292;&#20063;&#23601;&#26159;&#35843;&#29992;<code>inc()</code>&#26041;&#27861;&#26159;&#24517;&#39035;&#33719;&#21462;&#38145;&#65292;&#20294;&#26159;&#65292;<code>get()</code>&#26041;&#27861;&#21482;&#35835;&#21462;&#25968;&#25454;&#65292;&#19981;&#20462;&#25913;&#25968;&#25454;&#65292;&#23427;&#23454;&#38469;&#19978;&#20801;&#35768;&#22810;&#20010;&#32447;&#31243;&#21516;&#26102;&#35843;&#29992;&#12290;</p>
<p>&#23454;&#38469;&#19978;&#25105;&#20204;&#24819;&#35201;&#30340;&#26159;&#65306;&#20801;&#35768;&#22810;&#20010;&#32447;&#31243;&#21516;&#26102;&#35835;&#65292;&#20294;&#21482;&#35201;&#26377;&#19968;&#20010;&#32447;&#31243;&#22312;&#20889;&#65292;&#20854;&#20182;&#32447;&#31243;&#23601;&#24517;&#39035;&#31561;&#24453;&#65306;</p>
<table>
<thead>
<tr>
<th></th>
<th>&#35835;</th>
<th>&#20889;</th>
</tr>
</thead>
<tbody>
<tr>
<td>&#35835;</td>
<td>&#20801;&#35768;</td>
<td>&#19981;&#20801;&#35768;</td>
</tr>
<tr>
<td>&#20889;</td>
<td>&#19981;&#20801;&#35768;</td>
<td>&#19981;&#20801;&#35768;</td>
</tr>
</tbody>
</table>
<p>&#20351;&#29992;<code>ReadWriteLock</code>&#21487;&#20197;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#65292;&#23427;&#20445;&#35777;&#65306;</p>
<ul>
<li>&#21482;&#20801;&#35768;&#19968;&#20010;&#32447;&#31243;&#20889;&#20837;&#65288;&#20854;&#20182;&#32447;&#31243;&#26082;&#19981;&#33021;&#20889;&#20837;&#20063;&#19981;&#33021;&#35835;&#21462;&#65289;&#65307;</li>
<li>&#27809;&#26377;&#20889;&#20837;&#26102;&#65292;&#22810;&#20010;&#32447;&#31243;&#20801;&#35768;&#21516;&#26102;&#35835;&#65288;&#25552;&#39640;&#24615;&#33021;&#65289;&#12290;</li>
</ul>
<p>&#29992;<code>ReadWriteLock</code>&#23454;&#29616;&#36825;&#20010;&#21151;&#33021;&#21313;&#20998;&#23481;&#26131;&#12290;&#25105;&#20204;&#38656;&#35201;&#21019;&#24314;&#19968;&#20010;<code>ReadWriteLock</code>&#23454;&#20363;&#65292;&#28982;&#21518;&#20998;&#21035;&#33719;&#21462;&#35835;&#38145;&#21644;&#20889;&#38145;&#65306;</p>
<pre><code>public class Counter {
    private final ReadWriteLock rwlock = new ReentrantReadWriteLock();
    private final Lock rlock = rwlock.readLock();
    private final Lock wlock = rwlock.writeLock();
    private int[] counts = new int[10];

    public void inc(int index) {
        wlock.lock(); // &#21152;&#20889;&#38145;
        try {
            counts[index] += 1;
        } finally {
            wlock.unlock(); // &#37322;&#25918;&#20889;&#38145;
        }
    }

    public int[] get() {
        rlock.lock(); // &#21152;&#35835;&#38145;
        try {
            return Arrays.copyOf(counts, counts.length);
        } finally {
            rlock.unlock(); // &#37322;&#25918;&#35835;&#38145;
        }
    }
}
</code></pre>
<p>&#25226;&#35835;&#20889;&#25805;&#20316;&#20998;&#21035;&#29992;&#35835;&#38145;&#21644;&#20889;&#38145;&#26469;&#21152;&#38145;&#65292;&#22312;&#35835;&#21462;&#26102;&#65292;&#22810;&#20010;&#32447;&#31243;&#21487;&#20197;&#21516;&#26102;&#33719;&#24471;&#35835;&#38145;&#65292;&#36825;&#26679;&#23601;&#22823;&#22823;&#25552;&#39640;&#20102;&#24182;&#21457;&#35835;&#30340;&#25191;&#34892;&#25928;&#29575;&#12290;</p>
<p>&#20351;&#29992;<code>ReadWriteLock</code>&#26102;&#65292;&#36866;&#29992;&#26465;&#20214;&#26159;&#21516;&#19968;&#20010;&#25968;&#25454;&#65292;&#26377;&#22823;&#37327;&#32447;&#31243;&#35835;&#21462;&#65292;&#20294;&#20165;&#26377;&#23569;&#25968;&#32447;&#31243;&#20462;&#25913;&#12290;</p>
<p>&#20363;&#22914;&#65292;&#19968;&#20010;&#35770;&#22363;&#30340;&#24086;&#23376;&#65292;&#22238;&#22797;&#21487;&#20197;&#30475;&#20570;&#20889;&#20837;&#25805;&#20316;&#65292;&#23427;&#26159;&#19981;&#39057;&#32321;&#30340;&#65292;&#20294;&#26159;&#65292;&#27983;&#35272;&#21487;&#20197;&#30475;&#20570;&#35835;&#21462;&#25805;&#20316;&#65292;&#26159;&#38750;&#24120;&#39057;&#32321;&#30340;&#65292;&#36825;&#31181;&#24773;&#20917;&#23601;&#21487;&#20197;&#20351;&#29992;<code>ReadWriteLock</code>&#12290;</p>
<h3>&#23567;&#32467;</h3>
<p>&#20351;&#29992;<code>ReadWriteLock</code>&#21487;&#20197;&#25552;&#39640;&#35835;&#21462;&#25928;&#29575;&#65306;</p>
<ul>
<li>
<p><code>ReadWriteLock</code>&#21482;&#20801;&#35768;&#19968;&#20010;&#32447;&#31243;&#20889;&#20837;&#65307;</p>
</li>
<li>
<p><code>ReadWriteLock</code>&#20801;&#35768;&#22810;&#20010;&#32447;&#31243;&#22312;&#27809;&#26377;&#20889;&#20837;&#26102;&#21516;&#26102;&#35835;&#21462;&#65307;</p>
</li>
<li>
<p><code>ReadWriteLock</code>&#36866;&#21512;&#35835;&#22810;&#20889;&#23569;&#30340;&#22330;&#26223;&#12290;</p>
</li>
</ul>
</div>

    <hr>

    <div class="x-wiki-prev-next uk-clearfix"></div>

    <div class="x-anchor x-comment-anchor"><a name="comments"></a></div>
							</div>
							<div id="x-content-bottom">
								<!-- __snippet__.contentBottom -->
								<div id="sponsor-a" class="uk-margin-bottom"></div>
								<!-- // __snippet__.contentBottom -->
							</div>
							<div id="x-content-comment">
								    <h3>Comments</h3>

    <ul id="x-comment-list" class="uk-comment-list">
    </ul>

    <h3>Make a comment</h3>

    <div class="x-display-if-not-signin">
        <p><button type="button" class="uk-button" onclick="showSignin()"><i class="uk-icon-signin"></i> Sign in to make a comment</button></p>
    </div>

    <div id="x-comment-area"></div>

							</div>
						</div>
											
