<div class="uk-flex-item-1" style="padding-left:15px; ">
							<div id="x-content-top">
								<!-- __snippet__.contentTop -->
																<!-- // __snippet__.contentTop -->
							</div>
							<div id="x-content">
								    <h4>JDBC&#20107;&#21153;</h4>
    <div class="x-wiki-info">
    	<span>Reads: 5347</span>
    	<a href="/manage/wiki/wikipage_update?id=1321748500840481" target="_blank" class="x-can-edit uk-text-danger">Edit</a>
</div>

    <hr>

    <div class="x-wiki-content x-main-content">
<p>&#25968;&#25454;&#24211;&#20107;&#21153;&#65288;Transaction&#65289;&#26159;&#30001;&#33509;&#24178;&#20010;SQL&#35821;&#21477;&#26500;&#25104;&#30340;&#19968;&#20010;&#25805;&#20316;&#24207;&#21015;&#65292;&#26377;&#28857;&#31867;&#20284;&#20110;Java&#30340;<code>synchronized</code>&#21516;&#27493;&#12290;&#25968;&#25454;&#24211;&#31995;&#32479;&#20445;&#35777;&#22312;&#19968;&#20010;&#20107;&#21153;&#20013;&#30340;&#25152;&#26377;SQL&#35201;&#20040;&#20840;&#37096;&#25191;&#34892;&#25104;&#21151;&#65292;&#35201;&#20040;&#20840;&#37096;&#19981;&#25191;&#34892;&#65292;&#21363;&#25968;&#25454;&#24211;&#20107;&#21153;&#20855;&#26377;ACID&#29305;&#24615;&#65306;</p>
<ul>
<li>Atomicity&#65306;&#21407;&#23376;&#24615;</li>
<li>Consistency&#65306;&#19968;&#33268;&#24615;</li>
<li>Isolation&#65306;&#38548;&#31163;&#24615;</li>
<li>Durability&#65306;&#25345;&#20037;&#24615;</li>
</ul>
<p>&#25968;&#25454;&#24211;&#20107;&#21153;&#21487;&#20197;&#24182;&#21457;&#25191;&#34892;&#65292;&#32780;&#25968;&#25454;&#24211;&#31995;&#32479;&#20174;&#25928;&#29575;&#32771;&#34385;&#65292;&#23545;&#20107;&#21153;&#23450;&#20041;&#20102;&#19981;&#21516;&#30340;&#38548;&#31163;&#32423;&#21035;&#12290;SQL&#26631;&#20934;&#23450;&#20041;&#20102;4&#31181;&#38548;&#31163;&#32423;&#21035;&#65292;&#20998;&#21035;&#23545;&#24212;&#21487;&#33021;&#20986;&#29616;&#30340;&#25968;&#25454;&#19981;&#19968;&#33268;&#30340;&#24773;&#20917;&#65306;</p>
<table>
<thead>
<tr>
<th>Isolation Level</th>
<th>&#33039;&#35835;&#65288;Dirty Read&#65289;</th>
<th>&#19981;&#21487;&#37325;&#22797;&#35835;&#65288;Non Repeatable Read&#65289;</th>
<th>&#24187;&#35835;&#65288;Phantom Read&#65289;</th>
</tr>
</thead>
<tbody>
<tr>
<td>Read Uncommitted</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Read Committed</td>
<td>-</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Repeatable Read</td>
<td>-</td>
<td>-</td>
<td>Yes</td>
</tr>
<tr>
<td>Serializable</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
</tbody>
</table>
<p>&#23545;&#24212;&#29992;&#31243;&#24207;&#26469;&#35828;&#65292;&#25968;&#25454;&#24211;&#20107;&#21153;&#38750;&#24120;&#37325;&#35201;&#65292;&#24456;&#22810;&#36816;&#34892;&#30528;&#20851;&#38190;&#20219;&#21153;&#30340;&#24212;&#29992;&#31243;&#24207;&#65292;&#37117;&#24517;&#39035;&#20381;&#36182;&#25968;&#25454;&#24211;&#20107;&#21153;&#20445;&#35777;&#31243;&#24207;&#30340;&#32467;&#26524;&#27491;&#24120;&#12290;</p>
<p>&#20030;&#20010;&#20363;&#23376;&#65306;&#20551;&#35774;&#23567;&#26126;&#20934;&#22791;&#32473;&#23567;&#32418;&#25903;&#20184;100&#65292;&#20004;&#20154;&#22312;&#25968;&#25454;&#24211;&#20013;&#30340;&#35760;&#24405;&#20027;&#38190;&#20998;&#21035;&#26159;<code>123</code>&#21644;<code>456</code>&#65292;&#37027;&#20040;&#29992;&#20004;&#26465;SQL&#35821;&#21477;&#25805;&#20316;&#22914;&#19979;&#65306;</p>
<pre><code>UPDATE accounts SET balance = balance - 100 WHERE id=123 AND balance &gt;= 100;
UPDATE accounts SET balance = balance + 100 WHERE id=456;
</code></pre>
<p>&#36825;&#20004;&#26465;&#35821;&#21477;&#24517;&#39035;&#20197;&#20107;&#21153;&#26041;&#24335;&#25191;&#34892;&#25165;&#33021;&#20445;&#35777;&#19994;&#21153;&#30340;&#27491;&#30830;&#24615;&#65292;&#22240;&#20026;&#19968;&#26086;&#31532;&#19968;&#26465;SQL&#25191;&#34892;&#25104;&#21151;&#32780;&#31532;&#20108;&#26465;SQL&#22833;&#36133;&#30340;&#35805;&#65292;&#31995;&#32479;&#30340;&#38065;&#23601;&#20250;&#20973;&#31354;&#20943;&#23569;100&#65292;&#32780;&#26377;&#20102;&#20107;&#21153;&#65292;&#35201;&#20040;&#36825;&#31508;&#36716;&#36134;&#25104;&#21151;&#65292;&#35201;&#20040;&#36716;&#36134;&#22833;&#36133;&#65292;&#21452;&#26041;&#36134;&#25143;&#30340;&#38065;&#37117;&#19981;&#21464;&#12290;</p>
<p>&#36825;&#37324;&#25105;&#20204;&#19981;&#35752;&#35770;&#35814;&#32454;&#30340;SQL&#20107;&#21153;&#65292;&#22914;&#26524;&#23545;SQL&#20107;&#21153;&#19981;&#29087;&#24713;&#65292;&#35831;&#21442;&#32771;<a href="/wiki/1177760294764384/1179611198786848">SQL&#20107;&#21153;</a>&#12290;</p>
<p>&#35201;&#22312;JDBC&#20013;&#25191;&#34892;&#20107;&#21153;&#65292;&#26412;&#36136;&#19978;&#23601;&#26159;&#22914;&#20309;&#25226;&#22810;&#26465;SQL&#21253;&#35065;&#22312;&#19968;&#20010;&#25968;&#25454;&#24211;&#20107;&#21153;&#20013;&#25191;&#34892;&#12290;&#25105;&#20204;&#26469;&#30475;JDBC&#30340;&#20107;&#21153;&#20195;&#30721;&#65306;</p>
<pre><code>Connection conn = openConnection();
try {
    // &#20851;&#38381;&#33258;&#21160;&#25552;&#20132;:
    conn.setAutoCommit(false);
    // &#25191;&#34892;&#22810;&#26465;SQL&#35821;&#21477;:
    insert(); update(); delete();
    // &#25552;&#20132;&#20107;&#21153;:
    conn.commit();
} catch (SQLException e) {
    // &#22238;&#28378;&#20107;&#21153;:
    conn.rollback();
} finally {
    conn.setAutoCommit(true);
    conn.close();
}
</code></pre>
<p>&#20854;&#20013;&#65292;&#24320;&#21551;&#20107;&#21153;&#30340;&#20851;&#38190;&#20195;&#30721;&#26159;<code>conn.setAutoCommit(false)</code>&#65292;&#34920;&#31034;&#20851;&#38381;&#33258;&#21160;&#25552;&#20132;&#12290;&#25552;&#20132;&#20107;&#21153;&#30340;&#20195;&#30721;&#22312;&#25191;&#34892;&#23436;&#25351;&#23450;&#30340;&#33509;&#24178;&#26465;SQL&#35821;&#21477;&#21518;&#65292;&#35843;&#29992;<code>conn.commit()</code>&#12290;&#35201;&#27880;&#24847;&#20107;&#21153;&#19981;&#26159;&#24635;&#33021;&#25104;&#21151;&#65292;&#22914;&#26524;&#20107;&#21153;&#25552;&#20132;&#22833;&#36133;&#65292;&#20250;&#25243;&#20986;SQL&#24322;&#24120;&#65288;&#20063;&#21487;&#33021;&#22312;&#25191;&#34892;SQL&#35821;&#21477;&#30340;&#26102;&#20505;&#23601;&#25243;&#20986;&#20102;&#65289;&#65292;&#27492;&#26102;&#25105;&#20204;&#24517;&#39035;&#25429;&#33719;&#24182;&#35843;&#29992;<code>conn.rollback()</code>&#22238;&#28378;&#20107;&#21153;&#12290;&#26368;&#21518;&#65292;&#22312;<code>finally</code>&#20013;&#36890;&#36807;<code>conn.setAutoCommit(true)</code>&#25226;<code>Connection</code>&#23545;&#35937;&#30340;&#29366;&#24577;&#24674;&#22797;&#21040;&#21021;&#22987;&#20540;&#12290;</p>
<p>&#23454;&#38469;&#19978;&#65292;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#33719;&#21462;&#21040;<code>Connection</code>&#36830;&#25509;&#21518;&#65292;&#24635;&#26159;&#22788;&#20110;&#8220;&#33258;&#21160;&#25552;&#20132;&#8221;&#27169;&#24335;&#65292;&#20063;&#23601;&#26159;&#27599;&#25191;&#34892;&#19968;&#26465;SQL&#37117;&#26159;&#20316;&#20026;&#20107;&#21153;&#33258;&#21160;&#25191;&#34892;&#30340;&#65292;&#36825;&#20063;&#26159;&#20026;&#20160;&#20040;&#21069;&#38754;&#20960;&#33410;&#25105;&#20204;&#30340;&#26356;&#26032;&#25805;&#20316;&#24635;&#33021;&#25104;&#21151;&#30340;&#21407;&#22240;&#65306;&#22240;&#20026;&#40664;&#35748;&#26377;&#36825;&#31181;&#8220;&#38544;&#24335;&#20107;&#21153;&#8221;&#12290;&#21482;&#35201;&#20851;&#38381;&#20102;<code>Connection</code>&#30340;<code>autoCommit</code>&#65292;&#37027;&#20040;&#23601;&#21487;&#20197;&#22312;&#19968;&#20010;&#20107;&#21153;&#20013;&#25191;&#34892;&#22810;&#26465;&#35821;&#21477;&#65292;&#20107;&#21153;&#20197;<code>commit()</code>&#26041;&#27861;&#32467;&#26463;&#12290;</p>
<p>&#22914;&#26524;&#35201;&#35774;&#23450;&#20107;&#21153;&#30340;&#38548;&#31163;&#32423;&#21035;&#65292;&#21487;&#20197;&#20351;&#29992;&#22914;&#19979;&#20195;&#30721;&#65306;</p>
<pre><code>// &#35774;&#23450;&#38548;&#31163;&#32423;&#21035;&#20026;READ COMMITTED:
conn.setTransactionIsolation(Connection.TRANSACTION_READ_COMMITTED);
</code></pre>
<p>&#22914;&#26524;&#27809;&#26377;&#35843;&#29992;&#19978;&#36848;&#26041;&#27861;&#65292;&#37027;&#20040;&#20250;&#20351;&#29992;&#25968;&#25454;&#24211;&#30340;&#40664;&#35748;&#38548;&#31163;&#32423;&#21035;&#12290;MySQL&#30340;&#40664;&#35748;&#38548;&#31163;&#32423;&#21035;&#26159;<code>REPEATABLE READ</code>&#12290;</p>
<h3>&#32451;&#20064;</h3>
<p><a href="https://gitee.com/liaoxuefeng/learn-java/raw/master/practices/Java%E6%95%99%E7%A8%8B/170.JDBC%E7%BC%96%E7%A8%8B.1255943820274272/40.JDBC%E4%BA%8B%E5%8A%A1.1321748500840481/jdbc-transaction.zip">&#20351;&#29992;&#25968;&#25454;&#24211;&#20107;&#21153;</a></p>
<h3>&#23567;&#32467;</h3>
<p>&#25968;&#25454;&#24211;&#20107;&#21153;&#65288;Transaction&#65289;&#20855;&#26377;ACID&#29305;&#24615;&#65306;</p>
<ul>
<li>Atomicity&#65306;&#21407;&#23376;&#24615;</li>
<li>Consistency&#65306;&#19968;&#33268;&#24615;</li>
<li>Isolation&#65306;&#38548;&#31163;&#24615;</li>
<li>Durability&#65306;&#25345;&#20037;&#24615;</li>
</ul>
<p>JDBC&#25552;&#20379;&#20102;&#20107;&#21153;&#30340;&#25903;&#25345;&#65292;&#20351;&#29992;Connection&#21487;&#20197;&#24320;&#21551;&#12289;&#25552;&#20132;&#25110;&#22238;&#28378;&#20107;&#21153;&#12290;</p>
</div>

    <hr>

    <div class="x-wiki-prev-next uk-clearfix"></div>

    <div class="x-anchor x-comment-anchor"><a name="comments"></a></div>
							</div>
							<div id="x-content-bottom">
								<!-- __snippet__.contentBottom -->
								<div id="sponsor-a" class="uk-margin-bottom"></div>
								<!-- // __snippet__.contentBottom -->
							</div>
							<div id="x-content-comment">
								    <h3>Comments</h3>

    <ul id="x-comment-list" class="uk-comment-list">
    </ul>

    <h3>Make a comment</h3>

    <div class="x-display-if-not-signin">
        <p><button type="button" class="uk-button" onclick="showSignin()"><i class="uk-icon-signin"></i> Sign in to make a comment</button></p>
    </div>

    <div id="x-comment-area"></div>

							</div>
						</div>
											
