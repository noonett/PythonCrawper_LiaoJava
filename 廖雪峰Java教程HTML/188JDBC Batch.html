<div class="uk-flex-item-1" style="padding-left:15px; ">
							<div id="x-content-top">
								<!-- __snippet__.contentTop -->
																<!-- // __snippet__.contentTop -->
							</div>
							<div id="x-content">
								    <h4>JDBC Batch</h4>
    <div class="x-wiki-info">
    	<span>Reads: 5073</span>
    	<a href="/manage/wiki/wikipage_update?id=1322290857902113" target="_blank" class="x-can-edit uk-text-danger">Edit</a>
</div>

    <hr>

    <div class="x-wiki-content x-main-content">
<p>&#20351;&#29992;JDBC&#25805;&#20316;&#25968;&#25454;&#24211;&#30340;&#26102;&#20505;&#65292;&#32463;&#24120;&#20250;&#25191;&#34892;&#19968;&#20123;&#25209;&#37327;&#25805;&#20316;&#12290;</p>
<p>&#20363;&#22914;&#65292;&#19968;&#27425;&#24615;&#32473;&#20250;&#21592;&#22686;&#21152;&#21487;&#29992;&#20248;&#24800;&#21048;&#33509;&#24178;&#65292;&#25105;&#20204;&#21487;&#20197;&#25191;&#34892;&#20197;&#19979;SQL&#20195;&#30721;&#65306;</p>
<pre><code>INSERT INTO coupons (user_id, type, expires) VALUES (123, 'DISCOUNT', '2030-12-31');
INSERT INTO coupons (user_id, type, expires) VALUES (234, 'DISCOUNT', '2030-12-31');
INSERT INTO coupons (user_id, type, expires) VALUES (345, 'DISCOUNT', '2030-12-31');
INSERT INTO coupons (user_id, type, expires) VALUES (456, 'DISCOUNT', '2030-12-31');
...
</code></pre>
<p>&#23454;&#38469;&#19978;&#25191;&#34892;JDBC&#26102;&#65292;&#22240;&#20026;&#21482;&#26377;&#21344;&#20301;&#31526;&#21442;&#25968;&#19981;&#21516;&#65292;&#25152;&#20197;SQL&#23454;&#38469;&#19978;&#26159;&#19968;&#26679;&#30340;&#65306;</p>
<pre><code>for (var params : paramsList) {
    PreparedStatement ps = conn.preparedStatement("INSERT INTO coupons (user_id, type, expires) VALUES (?,?,?)");
    ps.setLong(params.get(0));
    ps.setString(params.get(1));
    ps.setString(params.get(2));
    ps.executeUpdate();
}
</code></pre>
<p>&#31867;&#20284;&#30340;&#36824;&#26377;&#65292;&#32473;&#27599;&#20010;&#21592;&#24037;&#34218;&#27700;&#22686;&#21152;10%&#65374;30%&#65306;</p>
<pre><code>UPDATE employees SET salary = salary * ? WHERE id = ?
</code></pre>
<p>&#36890;&#36807;&#19968;&#20010;&#24490;&#29615;&#26469;&#25191;&#34892;&#27599;&#20010;<code>PreparedStatement</code>&#34429;&#28982;&#21487;&#34892;&#65292;&#20294;&#26159;&#24615;&#33021;&#24456;&#20302;&#12290;SQL&#25968;&#25454;&#24211;&#23545;SQL&#35821;&#21477;&#30456;&#21516;&#65292;&#20294;&#21482;&#26377;&#21442;&#25968;&#19981;&#21516;&#30340;&#33509;&#24178;&#35821;&#21477;&#21487;&#20197;&#20316;&#20026;batch&#25191;&#34892;&#65292;&#21363;&#25209;&#37327;&#25191;&#34892;&#65292;&#36825;&#31181;&#25805;&#20316;&#26377;&#29305;&#21035;&#20248;&#21270;&#65292;&#36895;&#24230;&#36828;&#36828;&#24555;&#20110;&#24490;&#29615;&#25191;&#34892;&#27599;&#20010;SQL&#12290;</p>
<p>&#22312;JDBC&#20195;&#30721;&#20013;&#65292;&#25105;&#20204;&#21487;&#20197;&#21033;&#29992;SQL&#25968;&#25454;&#24211;&#30340;&#36825;&#19968;&#29305;&#24615;&#65292;&#25226;&#21516;&#19968;&#20010;SQL&#20294;&#21442;&#25968;&#19981;&#21516;&#30340;&#33509;&#24178;&#27425;&#25805;&#20316;&#21512;&#24182;&#20026;&#19968;&#20010;batch&#25191;&#34892;&#12290;&#25105;&#20204;&#20197;&#25209;&#37327;&#25554;&#20837;&#20026;&#20363;&#65292;&#31034;&#20363;&#20195;&#30721;&#22914;&#19979;&#65306;</p>
<pre><code>try (PreparedStatement ps = conn.prepareStatement("INSERT INTO students (name, gender, grade, score) VALUES (?, ?, ?, ?)")) {
    // &#23545;&#21516;&#19968;&#20010;PreparedStatement&#21453;&#22797;&#35774;&#32622;&#21442;&#25968;&#24182;&#35843;&#29992;addBatch():
    for (String name : names) {
        ps.setString(1, name);
        ps.setBoolean(2, gender);
        ps.setInt(3, grade);
        ps.setInt(4, score);
        ps.addBatch(); // &#28155;&#21152;&#21040;batch
    }
    // &#25191;&#34892;batch:
    int[] ns = ps.executeBatch();
    for (int n : ns) {
        System.out.println(n + " inserted."); // batch&#20013;&#27599;&#20010;SQL&#25191;&#34892;&#30340;&#32467;&#26524;&#25968;&#37327;
    }
}
</code></pre>
<p>&#25191;&#34892;batch&#21644;&#25191;&#34892;&#19968;&#20010;SQL&#19981;&#21516;&#28857;&#22312;&#20110;&#65292;&#38656;&#35201;&#23545;&#21516;&#19968;&#20010;<code>PreparedStatement</code>&#21453;&#22797;&#35774;&#32622;&#21442;&#25968;&#24182;&#35843;&#29992;<code>addBatch()</code>&#65292;&#36825;&#26679;&#23601;&#30456;&#24403;&#20110;&#32473;&#19968;&#20010;SQL&#21152;&#19978;&#20102;&#22810;&#32452;&#21442;&#25968;&#65292;&#30456;&#24403;&#20110;&#21464;&#25104;&#20102;&#8220;&#22810;&#34892;&#8221;SQL&#12290;</p>
<p>&#31532;&#20108;&#20010;&#19981;&#21516;&#28857;&#26159;&#35843;&#29992;&#30340;&#19981;&#26159;<code>executeUpdate()</code>&#65292;&#32780;&#26159;<code>executeBatch()</code>&#65292;&#22240;&#20026;&#25105;&#20204;&#35774;&#32622;&#20102;&#22810;&#32452;&#21442;&#25968;&#65292;&#30456;&#24212;&#22320;&#65292;&#36820;&#22238;&#32467;&#26524;&#20063;&#26159;&#22810;&#20010;<code>int</code>&#20540;&#65292;&#22240;&#27492;&#36820;&#22238;&#31867;&#22411;&#26159;<code>int[]</code>&#65292;&#24490;&#29615;<code>int[]</code>&#25968;&#32452;&#21363;&#21487;&#33719;&#21462;&#27599;&#32452;&#21442;&#25968;&#25191;&#34892;&#21518;&#24433;&#21709;&#30340;&#32467;&#26524;&#25968;&#37327;&#12290;</p>
<h3>&#32451;&#20064;</h3>
<p>&#20351;&#29992;Batch&#25805;&#20316;</p>
<h3>&#23567;&#32467;</h3>
<p>&#20351;&#29992;JDBC&#30340;batch&#25805;&#20316;&#20250;&#22823;&#22823;&#25552;&#39640;&#25191;&#34892;&#25928;&#29575;&#65292;&#23545;&#20869;&#23481;&#30456;&#21516;&#65292;&#21442;&#25968;&#19981;&#21516;&#30340;SQL&#65292;&#35201;&#20248;&#20808;&#32771;&#34385;batch&#25805;&#20316;&#12290;</p>
</div>

    <hr>

    <div class="x-wiki-prev-next uk-clearfix"></div>

    <div class="x-anchor x-comment-anchor"><a name="comments"></a></div>
							</div>
							<div id="x-content-bottom">
								<!-- __snippet__.contentBottom -->
								<div id="sponsor-a" class="uk-margin-bottom"></div>
								<!-- // __snippet__.contentBottom -->
							</div>
							<div id="x-content-comment">
								    <h3>Comments</h3>

    <ul id="x-comment-list" class="uk-comment-list">
    </ul>

    <h3>Make a comment</h3>

    <div class="x-display-if-not-signin">
        <p><button type="button" class="uk-button" onclick="showSignin()"><i class="uk-icon-signin"></i> Sign in to make a comment</button></p>
    </div>

    <div id="x-comment-area"></div>

							</div>
						</div>
											
