<div class="uk-flex-item-1" style="padding-left:15px; ">
							<div id="x-content-top">
								<!-- __snippet__.contentTop -->
																<!-- // __snippet__.contentTop -->
							</div>
							<div id="x-content">
								    <h4>&#22788;&#29702;&#27880;&#35299;</h4>
    <div class="x-wiki-info">
    	<span>Reads: 230790</span>
    	<a href="/manage/wiki/wikipage_update?id=1265102026065728" target="_blank" class="x-can-edit uk-text-danger">Edit</a>
</div>

    <hr>

    <div class="x-wiki-content x-main-content">
<p>Java&#30340;&#27880;&#35299;&#26412;&#36523;&#23545;&#20195;&#30721;&#36923;&#36753;&#27809;&#26377;&#20219;&#20309;&#24433;&#21709;&#12290;&#26681;&#25454;<code>@Retention</code>&#30340;&#37197;&#32622;&#65306;</p>
<ul>
<li>
<code>SOURCE</code>&#31867;&#22411;&#30340;&#27880;&#35299;&#22312;&#32534;&#35793;&#26399;&#23601;&#34987;&#20002;&#25481;&#20102;&#65307;</li>
<li>
<code>CLASS</code>&#31867;&#22411;&#30340;&#27880;&#35299;&#20165;&#20445;&#23384;&#22312;class&#25991;&#20214;&#20013;&#65292;&#23427;&#20204;&#19981;&#20250;&#34987;&#21152;&#36733;&#36827;JVM&#65307;</li>
<li>
<code>RUNTIME</code>&#31867;&#22411;&#30340;&#27880;&#35299;&#20250;&#34987;&#21152;&#36733;&#36827;JVM&#65292;&#24182;&#19988;&#22312;&#36816;&#34892;&#26399;&#21487;&#20197;&#34987;&#31243;&#24207;&#35835;&#21462;&#12290;</li>
</ul>
<p>&#22914;&#20309;&#20351;&#29992;&#27880;&#35299;&#23436;&#20840;&#30001;&#24037;&#20855;&#20915;&#23450;&#12290;<code>SOURCE</code>&#31867;&#22411;&#30340;&#27880;&#35299;&#20027;&#35201;&#30001;&#32534;&#35793;&#22120;&#20351;&#29992;&#65292;&#22240;&#27492;&#25105;&#20204;&#19968;&#33324;&#21482;&#20351;&#29992;&#65292;&#19981;&#32534;&#20889;&#12290;<code>CLASS</code>&#31867;&#22411;&#30340;&#27880;&#35299;&#20027;&#35201;&#30001;&#24213;&#23618;&#24037;&#20855;&#24211;&#20351;&#29992;&#65292;&#28041;&#21450;&#21040;class&#30340;&#21152;&#36733;&#65292;&#19968;&#33324;&#25105;&#20204;&#24456;&#23569;&#29992;&#21040;&#12290;&#21482;&#26377;<code>RUNTIME</code>&#31867;&#22411;&#30340;&#27880;&#35299;&#19981;&#20294;&#35201;&#20351;&#29992;&#65292;&#36824;&#32463;&#24120;&#38656;&#35201;&#32534;&#20889;&#12290;</p>
<p>&#22240;&#27492;&#65292;&#25105;&#20204;&#21482;&#35752;&#35770;&#22914;&#20309;&#35835;&#21462;<code>RUNTIME</code>&#31867;&#22411;&#30340;&#27880;&#35299;&#12290;</p>
<p>&#22240;&#20026;&#27880;&#35299;&#23450;&#20041;&#21518;&#20063;&#26159;&#19968;&#31181;<code>class</code>&#65292;&#25152;&#26377;&#30340;&#27880;&#35299;&#37117;&#32487;&#25215;&#33258;<code>java.lang.annotation.Annotation</code>&#65292;&#22240;&#27492;&#65292;&#35835;&#21462;&#27880;&#35299;&#65292;&#38656;&#35201;&#20351;&#29992;&#21453;&#23556;API&#12290;</p>
<p>Java&#25552;&#20379;&#30340;&#20351;&#29992;&#21453;&#23556;API&#35835;&#21462;<code>Annotation</code>&#30340;&#26041;&#27861;&#21253;&#25324;&#65306;</p>
<p>&#21028;&#26029;&#26576;&#20010;&#27880;&#35299;&#26159;&#21542;&#23384;&#22312;&#20110;<code>Class</code>&#12289;<code>Field</code>&#12289;<code>Method</code>&#25110;<code>Constructor</code>&#65306;</p>
<ul>
<li><code>Class.isAnnotationPresent(Class)</code></li>
<li><code>Field.isAnnotationPresent(Class)</code></li>
<li><code>Method.isAnnotationPresent(Class)</code></li>
<li><code>Constructor.isAnnotationPresent(Class)</code></li>
</ul>
<p>&#20363;&#22914;&#65306;</p>
<pre><code>// &#21028;&#26029;@Report&#26159;&#21542;&#23384;&#22312;&#20110;Person&#31867;:
Person.class.isAnnotationPresent(Report.class);
</code></pre>
<p>&#20351;&#29992;&#21453;&#23556;API&#35835;&#21462;Annotation&#65306;</p>
<ul>
<li><code>Class.getAnnotation(Class)</code></li>
<li><code>Field.getAnnotation(Class)</code></li>
<li><code>Method.getAnnotation(Class)</code></li>
<li><code>Constructor.getAnnotation(Class)</code></li>
</ul>
<p>&#20363;&#22914;&#65306;</p>
<pre><code>// &#33719;&#21462;Person&#23450;&#20041;&#30340;@Report&#27880;&#35299;:
Report report = Person.class.getAnnotation(Report.class);
int type = report.type();
String level = report.level();
</code></pre>
<p>&#20351;&#29992;&#21453;&#23556;API&#35835;&#21462;<code>Annotation</code>&#26377;&#20004;&#31181;&#26041;&#27861;&#12290;&#26041;&#27861;&#19968;&#26159;&#20808;&#21028;&#26029;<code>Annotation</code>&#26159;&#21542;&#23384;&#22312;&#65292;&#22914;&#26524;&#23384;&#22312;&#65292;&#23601;&#30452;&#25509;&#35835;&#21462;&#65306;</p>
<pre><code>Class cls = Person.class;
if (cls.isAnnotationPresent(Report.class)) {
    Report report = cls.getAnnotation(Report.class);
    ...
}
</code></pre>
<p>&#31532;&#20108;&#31181;&#26041;&#27861;&#26159;&#30452;&#25509;&#35835;&#21462;<code>Annotation</code>&#65292;&#22914;&#26524;<code>Annotation</code>&#19981;&#23384;&#22312;&#65292;&#23558;&#36820;&#22238;<code>null</code>&#65306;</p>
<pre><code>Class cls = Person.class;
Report report = cls.getAnnotation(Report.class);
if (report != null) {
   ...
}
</code></pre>
<p>&#35835;&#21462;&#26041;&#27861;&#12289;&#23383;&#27573;&#21644;&#26500;&#36896;&#26041;&#27861;&#30340;<code>Annotation</code>&#21644;Class&#31867;&#20284;&#12290;&#20294;&#35201;&#35835;&#21462;&#26041;&#27861;&#21442;&#25968;&#30340;<code>Annotation</code>&#23601;&#27604;&#36739;&#40635;&#28902;&#19968;&#28857;&#65292;&#22240;&#20026;&#26041;&#27861;&#21442;&#25968;&#26412;&#36523;&#21487;&#20197;&#30475;&#25104;&#19968;&#20010;&#25968;&#32452;&#65292;&#32780;&#27599;&#20010;&#21442;&#25968;&#21448;&#21487;&#20197;&#23450;&#20041;&#22810;&#20010;&#27880;&#35299;&#65292;&#25152;&#20197;&#65292;&#19968;&#27425;&#33719;&#21462;&#26041;&#27861;&#21442;&#25968;&#30340;&#25152;&#26377;&#27880;&#35299;&#23601;&#24517;&#39035;&#29992;&#19968;&#20010;&#20108;&#32500;&#25968;&#32452;&#26469;&#34920;&#31034;&#12290;&#20363;&#22914;&#65292;&#23545;&#20110;&#20197;&#19979;&#26041;&#27861;&#23450;&#20041;&#30340;&#27880;&#35299;&#65306;</p>
<pre><code>public void hello(@NotNull @Range(max=5) String name, @NotNull String prefix) {
}
</code></pre>
<p>&#35201;&#35835;&#21462;&#26041;&#27861;&#21442;&#25968;&#30340;&#27880;&#35299;&#65292;&#25105;&#20204;&#20808;&#29992;&#21453;&#23556;&#33719;&#21462;<code>Method</code>&#23454;&#20363;&#65292;&#28982;&#21518;&#35835;&#21462;&#26041;&#27861;&#21442;&#25968;&#30340;&#25152;&#26377;&#27880;&#35299;&#65306;</p>
<pre><code>// &#33719;&#21462;Method&#23454;&#20363;:
Method m = ...
// &#33719;&#21462;&#25152;&#26377;&#21442;&#25968;&#30340;Annotation:
Annotation[][] annos = m.getParameterAnnotations();
// &#31532;&#19968;&#20010;&#21442;&#25968;&#65288;&#32034;&#24341;&#20026;0&#65289;&#30340;&#25152;&#26377;Annotation:
Annotation[] annosOfName = annos[0];
for (Annotation anno : annosOfName) {
    if (anno instanceof Range) { // @Range&#27880;&#35299;
        Range r = (Range) anno;
    }
    if (anno instanceof NotNull) { // @NotNull&#27880;&#35299;
        NotNull n = (NotNull) anno;
    }
}
</code></pre>
<h3>&#20351;&#29992;&#27880;&#35299;</h3>
<p>&#27880;&#35299;&#22914;&#20309;&#20351;&#29992;&#65292;&#23436;&#20840;&#30001;&#31243;&#24207;&#33258;&#24049;&#20915;&#23450;&#12290;&#20363;&#22914;&#65292;JUnit&#26159;&#19968;&#20010;&#27979;&#35797;&#26694;&#26550;&#65292;&#23427;&#20250;&#33258;&#21160;&#36816;&#34892;&#25152;&#26377;&#26631;&#35760;&#20026;<code>@Test</code>&#30340;&#26041;&#27861;&#12290;</p>
<p>&#25105;&#20204;&#26469;&#30475;&#19968;&#20010;<code>@Range</code>&#27880;&#35299;&#65292;&#25105;&#20204;&#24076;&#26395;&#29992;&#23427;&#26469;&#23450;&#20041;&#19968;&#20010;<code>String</code>&#23383;&#27573;&#30340;&#35268;&#21017;&#65306;&#23383;&#27573;&#38271;&#24230;&#28385;&#36275;<code>@Range</code>&#30340;&#21442;&#25968;&#23450;&#20041;&#65306;</p>
<pre><code>@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
public @interface Range {
    int min() default 0;
    int max() default 255;
}
</code></pre>
<p>&#22312;&#26576;&#20010;JavaBean&#20013;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#35813;&#27880;&#35299;&#65306;</p>
<pre><code>public class Person {
    @Range(min=1, max=20)
    public String name;

    @Range(max=10)
    public String city;
}
</code></pre>
<p>&#20294;&#26159;&#65292;&#23450;&#20041;&#20102;&#27880;&#35299;&#65292;&#26412;&#36523;&#23545;&#31243;&#24207;&#36923;&#36753;&#27809;&#26377;&#20219;&#20309;&#24433;&#21709;&#12290;&#25105;&#20204;&#24517;&#39035;&#33258;&#24049;&#32534;&#20889;&#20195;&#30721;&#26469;&#20351;&#29992;&#27880;&#35299;&#12290;&#36825;&#37324;&#65292;&#25105;&#20204;&#32534;&#20889;&#19968;&#20010;<code>Person</code>&#23454;&#20363;&#30340;&#26816;&#26597;&#26041;&#27861;&#65292;&#23427;&#21487;&#20197;&#26816;&#26597;<code>Person</code>&#23454;&#20363;&#30340;<code>String</code>&#23383;&#27573;&#38271;&#24230;&#26159;&#21542;&#28385;&#36275;<code>@Range</code>&#30340;&#23450;&#20041;&#65306;</p>
<pre><code>void check(Person person) throws IllegalArgumentException, ReflectiveOperationException {
    // &#36941;&#21382;&#25152;&#26377;Field:
    for (Field field : person.getClass().getFields()) {
        // &#33719;&#21462;Field&#23450;&#20041;&#30340;@Range:
        Range range = field.getAnnotation(Range.class);
        // &#22914;&#26524;@Range&#23384;&#22312;:
        if (range != null) {
            // &#33719;&#21462;Field&#30340;&#20540;:
            Object value = field.get(person);
            // &#22914;&#26524;&#20540;&#26159;String:
            if (value instanceof String) {
                String s = (String) value;
                // &#21028;&#26029;&#20540;&#26159;&#21542;&#28385;&#36275;@Range&#30340;min/max:
                if (s.length() &lt; range.min() || s.length() &gt; range.max()) {
                    throw new IllegalArgumentException("Invalid field: " + field.getName());
                }
            }
        }
    }
}
</code></pre>
<p>&#36825;&#26679;&#19968;&#26469;&#65292;&#25105;&#20204;&#36890;&#36807;<code>@Range</code>&#27880;&#35299;&#65292;&#37197;&#21512;<code>check()</code>&#26041;&#27861;&#65292;&#23601;&#21487;&#20197;&#23436;&#25104;<code>Person</code>&#23454;&#20363;&#30340;&#26816;&#26597;&#12290;&#27880;&#24847;&#26816;&#26597;&#36923;&#36753;&#23436;&#20840;&#26159;&#25105;&#20204;&#33258;&#24049;&#32534;&#20889;&#30340;&#65292;JVM&#19981;&#20250;&#33258;&#21160;&#32473;&#27880;&#35299;&#28155;&#21152;&#20219;&#20309;&#39069;&#22806;&#30340;&#36923;&#36753;&#12290;</p>
<h3>&#32451;&#20064;</h3>
<p>&#20351;&#29992;<code>@Range</code>&#27880;&#35299;&#26469;&#26816;&#26597;Java Bean&#30340;&#23383;&#27573;&#12290;&#22914;&#26524;&#23383;&#27573;&#31867;&#22411;&#26159;<code>String</code>&#65292;&#23601;&#26816;&#26597;<code>String</code>&#30340;&#38271;&#24230;&#65292;&#22914;&#26524;&#23383;&#27573;&#26159;<code>int</code>&#65292;&#23601;&#26816;&#26597;<code>int</code>&#30340;&#33539;&#22260;&#12290;</p>
<p><a href="https://gitee.com/liaoxuefeng/learn-java/raw/master/practices/Java%E6%95%99%E7%A8%8B/50.%E6%B3%A8%E8%A7%A3.1255945389098144/30.%E5%A4%84%E7%90%86%E6%B3%A8%E8%A7%A3.1265102026065728/annotation-range-check.zip">annotation-range-check</a></p>
<h3>&#23567;&#32467;</h3>
<p>&#21487;&#20197;&#22312;&#36816;&#34892;&#26399;&#36890;&#36807;&#21453;&#23556;&#35835;&#21462;<code>RUNTIME</code>&#31867;&#22411;&#30340;&#27880;&#35299;&#65292;&#27880;&#24847;&#21315;&#19975;&#19981;&#35201;&#28431;&#20889;<code>@Retention(RetentionPolicy.RUNTIME)</code>&#65292;&#21542;&#21017;&#36816;&#34892;&#26399;&#26080;&#27861;&#35835;&#21462;&#21040;&#35813;&#27880;&#35299;&#12290;</p>
<p>&#21487;&#20197;&#36890;&#36807;&#31243;&#24207;&#22788;&#29702;&#27880;&#35299;&#26469;&#23454;&#29616;&#30456;&#24212;&#30340;&#21151;&#33021;&#65306;</p>
<ul>
<li>&#23545;JavaBean&#30340;&#23646;&#24615;&#20540;&#25353;&#35268;&#21017;&#36827;&#34892;&#26816;&#26597;&#65307;</li>
<li>JUnit&#20250;&#33258;&#21160;&#36816;&#34892;<code>@Test</code>&#26631;&#35760;&#30340;&#27979;&#35797;&#26041;&#27861;&#12290;</li>
</ul>
</div>

    <hr>

    <div class="x-wiki-prev-next uk-clearfix"></div>

    <div class="x-anchor x-comment-anchor"><a name="comments"></a></div>
							</div>
							<div id="x-content-bottom">
								<!-- __snippet__.contentBottom -->
								<div id="sponsor-a" class="uk-margin-bottom"></div>
								<!-- // __snippet__.contentBottom -->
							</div>
							<div id="x-content-comment">
								    <h3>Comments</h3>

    <ul id="x-comment-list" class="uk-comment-list">
    </ul>

    <h3>Make a comment</h3>

    <div class="x-display-if-not-signin">
        <p><button type="button" class="uk-button" onclick="showSignin()"><i class="uk-icon-signin"></i> Sign in to make a comment</button></p>
    </div>

    <div id="x-comment-area"></div>

							</div>
						</div>
											
