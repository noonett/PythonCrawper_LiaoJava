<div class="uk-flex-item-1" style="padding-left:15px; ">
							<div id="x-content-top">
								<!-- __snippet__.contentTop -->
																<!-- // __snippet__.contentTop -->
							</div>
							<div id="x-content">
								    <h4>&#35266;&#23519;&#32773;</h4>
    <div class="x-wiki-info">
    	<span>Reads: 297</span>
    	<a href="/manage/wiki/wikipage_update?id=1281319577321505" target="_blank" class="x-can-edit uk-text-danger">Edit</a>
</div>

    <hr>

    <div class="x-wiki-content x-main-content">
<blockquote>
<p>&#23450;&#20041;&#23545;&#35937;&#38388;&#30340;&#19968;&#31181;&#19968;&#23545;&#22810;&#30340;&#20381;&#36182;&#20851;&#31995;&#65292;&#24403;&#19968;&#20010;&#23545;&#35937;&#30340;&#29366;&#24577;&#21457;&#29983;&#25913;&#21464;&#26102;&#65292;&#25152;&#26377;&#20381;&#36182;&#20110;&#23427;&#30340;&#23545;&#35937;&#37117;&#24471;&#21040;&#36890;&#30693;&#24182;&#34987;&#33258;&#21160;&#26356;&#26032;&#12290;</p>
</blockquote>
<p>&#35266;&#23519;&#32773;&#27169;&#24335;&#65288;Observer&#65289;&#21448;&#31216;&#21457;&#24067;-&#35746;&#38405;&#27169;&#24335;&#65288;Publish-Subscribe&#65306;Pub/Sub&#65289;&#12290;&#23427;&#26159;&#19968;&#31181;&#36890;&#30693;&#26426;&#21046;&#65292;&#35753;&#21457;&#36865;&#36890;&#30693;&#30340;&#19968;&#26041;&#65288;&#34987;&#35266;&#23519;&#26041;&#65289;&#21644;&#25509;&#25910;&#36890;&#30693;&#30340;&#19968;&#26041;&#65288;&#35266;&#23519;&#32773;&#65289;&#33021;&#24444;&#27492;&#20998;&#31163;&#65292;&#20114;&#19981;&#24433;&#21709;&#12290;</p>
<p>&#35201;&#29702;&#35299;&#35266;&#23519;&#32773;&#27169;&#24335;&#65292;&#25105;&#20204;&#36824;&#26159;&#30475;&#20363;&#23376;&#12290;</p>
<p>&#20551;&#35774;&#19968;&#20010;&#30005;&#21830;&#32593;&#31449;&#65292;&#26377;&#22810;&#31181;<code>Product</code>&#65288;&#21830;&#21697;&#65289;&#65292;&#21516;&#26102;&#65292;<code>Customer</code>&#65288;&#28040;&#36153;&#32773;&#65289;&#21644;<code>Admin</code>&#65288;&#31649;&#29702;&#21592;&#65289;&#23545;&#21830;&#21697;&#19978;&#26550;&#12289;&#20215;&#26684;&#25913;&#21464;&#37117;&#24863;&#20852;&#36259;&#65292;&#24076;&#26395;&#33021;&#31532;&#19968;&#26102;&#38388;&#33719;&#24471;&#36890;&#30693;&#12290;&#20110;&#26159;&#65292;<code>Store</code>&#65288;&#21830;&#22330;&#65289;&#21487;&#20197;&#36825;&#20040;&#20889;&#65306;</p>
<pre><code>public class Store {
    Customer customer;
    Admin admin;

    private Map&lt;String, Product&gt; products = new HashMap&lt;&gt;();

    public void addNewProduct(String name, double price) {
        Product p = new Product(name, price);
        products.put(p.getName(), p);
        // &#36890;&#30693;&#29992;&#25143;:
        customer.onPublished(p);
        // &#36890;&#30693;&#31649;&#29702;&#21592;:
        admin.onPublished(p);
    }

    public void setProductPrice(String name, double price) {
        Product p = products.get(name);
        p.setPrice(price);
        // &#36890;&#30693;&#29992;&#25143;:
        customer.onPriceChanged(p);
        // &#36890;&#30693;&#31649;&#29702;&#21592;:
        admin.onPriceChanged(p);
    }
}
</code></pre>
<p>&#25105;&#20204;&#35266;&#23519;&#19978;&#36848;<code>Store</code>&#31867;&#30340;&#38382;&#39064;&#65306;&#23427;&#30452;&#25509;&#24341;&#29992;&#20102;<code>Customer</code>&#21644;<code>Admin</code>&#12290;&#20808;&#19981;&#32771;&#34385;&#22810;&#20010;<code>Customer</code>&#25110;&#22810;&#20010;<code>Admin</code>&#30340;&#38382;&#39064;&#65292;&#19978;&#36848;<code>Store</code>&#31867;&#26368;&#22823;&#30340;&#38382;&#39064;&#26159;&#65292;&#22914;&#26524;&#35201;&#21152;&#19968;&#20010;&#26032;&#30340;&#35266;&#23519;&#32773;&#31867;&#22411;&#65292;&#20363;&#22914;&#24037;&#21830;&#23616;&#31649;&#29702;&#21592;&#65292;<code>Store</code>&#31867;&#23601;&#24517;&#39035;&#32487;&#32493;&#25913;&#21160;&#12290;</p>
<p>&#22240;&#27492;&#65292;&#19978;&#36848;&#38382;&#39064;&#30340;&#26412;&#36136;&#26159;<code>Store</code>&#24076;&#26395;&#21457;&#36865;&#36890;&#30693;&#32473;&#37027;&#20123;&#20851;&#24515;<code>Product</code>&#30340;&#23545;&#35937;&#65292;&#20294;<code>Store</code>&#24182;&#19981;&#24819;&#30693;&#36947;&#36825;&#20123;&#20154;&#26159;&#35841;&#12290;&#35266;&#23519;&#32773;&#27169;&#24335;&#23601;&#26159;&#35201;&#20998;&#31163;&#34987;&#35266;&#23519;&#32773;&#21644;&#35266;&#23519;&#32773;&#20043;&#38388;&#30340;&#32806;&#21512;&#20851;&#31995;&#12290;</p>
<p>&#35201;&#23454;&#29616;&#36825;&#19968;&#30446;&#26631;&#20063;&#24456;&#31616;&#21333;&#65292;<code>Store</code>&#19981;&#33021;&#30452;&#25509;&#24341;&#29992;<code>Customer</code>&#21644;<code>Admin</code>&#65292;&#30456;&#21453;&#65292;&#23427;&#24341;&#29992;&#19968;&#20010;<code>ProductObserver</code>&#25509;&#21475;&#65292;&#20219;&#20309;&#20154;&#24819;&#35201;&#35266;&#23519;<code>Store</code>&#65292;&#21482;&#35201;&#23454;&#29616;&#35813;&#25509;&#21475;&#65292;&#24182;&#19988;&#25226;&#33258;&#24049;&#27880;&#20876;&#21040;<code>Store</code>&#21363;&#21487;&#65306;</p>
<pre><code>public class Store {
    private List&lt;ProductObserver&gt; observers = new ArrayList&lt;&gt;();
    private Map&lt;String, Product&gt; products = new HashMap&lt;&gt;();

    // &#27880;&#20876;&#35266;&#23519;&#32773;:
    public void addObserver(ProductObserver observer) {
        this.observers.add(observer);
    }

    // &#21462;&#28040;&#27880;&#20876;:
    public void removeObserver(ProductObserver observer) {
        this.observers.remove(observer);
    }

    public void addNewProduct(String name, double price) {
        Product p = new Product(name, price);
        products.put(p.getName(), p);
        // &#36890;&#30693;&#35266;&#23519;&#32773;:
        observers.forEach(o -&gt; o.onPublished(p));
    }

    public void setProductPrice(String name, double price) {
        Product p = products.get(name);
        p.setPrice(price);
        // &#36890;&#30693;&#35266;&#23519;&#32773;:
        observers.forEach(o -&gt; o.onPriceChanged(p));
    }
}
</code></pre>
<p>&#23601;&#26159;&#36825;&#20040;&#19968;&#20010;&#23567;&#23567;&#30340;&#25913;&#21160;&#65292;&#20351;&#24471;&#35266;&#23519;&#32773;&#31867;&#22411;&#23601;&#21487;&#20197;&#26080;&#38480;&#25193;&#20805;&#65292;&#32780;&#19988;&#65292;&#35266;&#23519;&#32773;&#30340;&#23450;&#20041;&#21487;&#20197;&#25918;&#21040;&#23458;&#25143;&#31471;&#65306;</p>
<pre><code>// observer:
Admin a = new Admin();
Customer c = new Customer();
// store:
Store store = new Store();
// &#27880;&#20876;&#35266;&#23519;&#32773;:
store.addObserver(a);
store.addObserver(c);
</code></pre>
<p>&#29978;&#33267;&#21487;&#20197;&#27880;&#20876;&#21311;&#21517;&#35266;&#23519;&#32773;&#65306;</p>
<pre><code>store.addObserver(new ProductObserver() {
    public void onPublished(Product product) {
        System.out.println("[Log] on product published: " + product);
    }

    public void onPriceChanged(Product product) {
        System.out.println("[Log] on product price changed: " + product);
    }
});
</code></pre>
<p>&#29992;&#19968;&#24352;&#22270;&#30011;&#20986;&#35266;&#23519;&#32773;&#27169;&#24335;&#65306;</p>
<pre><code class="language-ascii">&#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;      &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;
&#9474;  Store  &#9474;&#9472; &#9472; &#9472;&gt;&#9474;ProductObserver&#9474;
&#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;      &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;
     &#9474;                   &#9650;
                         &#9474;
     &#9474;             &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;
     &#9660;             &#9474;           &#9474;
&#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;   &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488; &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;
&#9474; Product &#9474;   &#9474;  Admin  &#9474; &#9474;Customer &#9474; ...
&#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;   &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496; &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;
</code></pre>
<p>&#35266;&#23519;&#32773;&#27169;&#24335;&#20063;&#26377;&#24456;&#22810;&#21464;&#20307;&#24418;&#24335;&#12290;&#26377;&#30340;&#35266;&#23519;&#32773;&#27169;&#24335;&#25226;&#34987;&#35266;&#23519;&#32773;&#20063;&#25277;&#35937;&#20986;&#25509;&#21475;&#65306;</p>
<pre><code>public interface ProductObservable { // &#27880;&#24847;&#27492;&#22788;&#25340;&#20889;&#26159;Observable&#19981;&#26159;Observer!
    void addObserver(ProductObserver observer);
    void removeObserver(ProductObserver observer);
}
</code></pre>
<p>&#23545;&#24212;&#30340;&#23454;&#20307;&#34987;&#35266;&#23519;&#32773;&#23601;&#35201;&#23454;&#29616;&#35813;&#25509;&#21475;&#65306;</p>
<pre><code>public class Store implements ProductObservable {
    ...
}
</code></pre>
<p>&#26377;&#20123;&#35266;&#23519;&#32773;&#27169;&#24335;&#25226;&#36890;&#30693;&#21464;&#25104;&#19968;&#20010;Event&#23545;&#35937;&#65292;&#20174;&#32780;&#19981;&#20877;&#26377;&#22810;&#31181;&#26041;&#27861;&#36890;&#30693;&#65292;&#32780;&#26159;&#32479;&#19968;&#25104;&#19968;&#31181;&#65306;</p>
<pre><code>public interface ProductObserver {
    void onEvent(ProductEvent event);
}
</code></pre>
<p>&#35753;&#35266;&#23519;&#32773;&#33258;&#24049;&#20174;Event&#23545;&#35937;&#20013;&#35835;&#21462;&#36890;&#30693;&#31867;&#22411;&#21644;&#36890;&#30693;&#25968;&#25454;&#12290;</p>
<p>&#24191;&#20041;&#30340;&#35266;&#23519;&#32773;&#27169;&#24335;&#21253;&#25324;&#25152;&#26377;&#28040;&#24687;&#31995;&#32479;&#12290;&#25152;&#35859;&#28040;&#24687;&#31995;&#32479;&#65292;&#23601;&#26159;&#25226;&#35266;&#23519;&#32773;&#21644;&#34987;&#35266;&#23519;&#32773;&#23436;&#20840;&#20998;&#31163;&#65292;&#36890;&#36807;&#28040;&#24687;&#31995;&#32479;&#26412;&#36523;&#26469;&#36890;&#30693;&#65306;</p>
<pre><code class="language-ascii">                 &#9484; &#9472; &#9472; &#9472; &#9472; &#9472; &#9472; &#9472; &#9472; &#9472; &#9472; &#9472; &#9488;
                   Messaging System
                 &#9474;                       &#9474;
                   &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;
              &#9484;&#9472;&#9472;&#9532;&gt;&#9474;Topic:newProduct  &#9474;&#9472;&#9472;&#9532;&#9472;&#9488;    &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;
              &#9474;    &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;    &#9500;&#9472;&#9472;&#9472;&gt;&#9474;ConsumerA&#9474;
&#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;   &#9474;  &#9474; &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;  &#9474; &#9474;    &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;
&#9474;Producer &#9474;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&gt;&#9474;Topic:priceChanged&#9474;&#9472;&#9472;&#9472;&#9472;&#9496;
&#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;   &#9474;  &#9474; &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;  &#9474;
              &#9474;    &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;         &#9484;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;
              &#9492;&#9472;&#9472;&#9532;&gt;&#9474;Topic:soldOut     &#9474;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9472;&gt;&#9474;ConsumerB&#9474;
                   &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;         &#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;
                 &#9492; &#9472; &#9472; &#9472; &#9472; &#9472; &#9472; &#9472; &#9472; &#9472; &#9472; &#9472; &#9496;
</code></pre>
<p>&#28040;&#24687;&#21457;&#36865;&#26041;&#31216;&#20026;Producer&#65292;&#28040;&#24687;&#25509;&#25910;&#26041;&#31216;&#20026;Consumer&#65292;Producer&#21457;&#36865;&#28040;&#24687;&#30340;&#26102;&#20505;&#65292;&#24517;&#39035;&#36873;&#25321;&#21457;&#36865;&#21040;&#21738;&#20010;Topic&#12290;Consumer&#21487;&#20197;&#35746;&#38405;&#33258;&#24049;&#24863;&#20852;&#36259;&#30340;Topic&#65292;&#20174;&#32780;&#21482;&#33719;&#24471;&#29305;&#23450;&#31867;&#22411;&#30340;&#28040;&#24687;&#12290;</p>
<p>&#20351;&#29992;&#28040;&#24687;&#31995;&#32479;&#23454;&#29616;&#35266;&#23519;&#32773;&#27169;&#24335;&#26102;&#65292;Producer&#21644;Consumer&#29978;&#33267;&#32463;&#24120;&#19981;&#22312;&#21516;&#19968;&#21488;&#26426;&#22120;&#19978;&#65292;&#24182;&#19988;&#21452;&#26041;&#23545;&#23545;&#26041;&#23436;&#20840;&#19968;&#26080;&#25152;&#30693;&#65292;&#22240;&#20026;&#27880;&#20876;&#35266;&#23519;&#32773;&#36825;&#20010;&#21160;&#20316;&#26412;&#36523;&#37117;&#22312;&#28040;&#24687;&#31995;&#32479;&#20013;&#23436;&#25104;&#65292;&#32780;&#19981;&#26159;&#22312;Producer&#20869;&#37096;&#23436;&#25104;&#12290;</p>
<p>&#27492;&#22806;&#65292;&#27880;&#24847;&#21040;&#25105;&#20204;&#22312;&#32534;&#20889;&#35266;&#23519;&#32773;&#27169;&#24335;&#30340;&#26102;&#20505;&#65292;&#36890;&#30693;Observer&#26159;&#20381;&#38752;&#35821;&#21477;&#65306;</p>
<pre><code>observers.forEach(o -&gt; o.onPublished(p));
</code></pre>
<p>&#36825;&#35828;&#26126;&#21508;&#20010;&#35266;&#23519;&#32773;&#26159;&#20381;&#27425;&#33719;&#24471;&#30340;&#21516;&#27493;&#36890;&#30693;&#65292;&#22914;&#26524;&#19978;&#19968;&#20010;&#35266;&#23519;&#32773;&#22788;&#29702;&#22826;&#24930;&#65292;&#20250;&#23548;&#33268;&#19979;&#19968;&#20010;&#35266;&#23519;&#32773;&#19981;&#33021;&#21450;&#26102;&#33719;&#24471;&#36890;&#30693;&#12290;&#27492;&#22806;&#65292;&#22914;&#26524;&#35266;&#23519;&#32773;&#22312;&#22788;&#29702;&#36890;&#30693;&#30340;&#26102;&#20505;&#65292;&#21457;&#29983;&#20102;&#24322;&#24120;&#65292;&#36824;&#38656;&#35201;&#34987;&#35266;&#23519;&#32773;&#22788;&#29702;&#24322;&#24120;&#65292;&#25165;&#33021;&#20445;&#35777;&#32487;&#32493;&#36890;&#30693;&#19979;&#19968;&#20010;&#35266;&#23519;&#32773;&#12290;</p>
<p>&#24605;&#32771;&#65306;&#22914;&#20309;&#25913;&#25104;&#24322;&#27493;&#36890;&#30693;&#65292;&#20351;&#24471;&#25152;&#26377;&#35266;&#23519;&#32773;&#21487;&#20197;&#24182;&#21457;&#21516;&#26102;&#22788;&#29702;&#65311;</p>
<p>&#26377;&#30340;&#31461;&#38795;&#21487;&#33021;&#21457;&#29616;Java&#26631;&#20934;&#24211;&#26377;&#20010;<code>java.util.Observable</code>&#31867;&#21644;&#19968;&#20010;<code>Observer</code>&#25509;&#21475;&#65292;&#29992;&#26469;&#24110;&#21161;&#25105;&#20204;&#23454;&#29616;&#35266;&#23519;&#32773;&#27169;&#24335;&#12290;&#20294;&#26159;&#65292;&#36825;&#20010;&#31867;&#38750;&#24120;&#19981;&#65281;&#22909;&#65281;&#29992;&#65281;&#23454;&#29616;&#35266;&#23519;&#32773;&#27169;&#24335;&#30340;&#26102;&#20505;&#65292;&#20063;&#19981;&#25512;&#33616;&#20511;&#21161;&#36825;&#20004;&#20010;&#19996;&#19996;&#12290;</p>
<h3>&#32451;&#20064;</h3>
<p>&#32473;<code>Store</code>&#22686;&#21152;&#19968;&#31181;&#31867;&#22411;&#30340;&#35266;&#23519;&#32773;&#65292;&#24182;&#25226;&#36890;&#30693;&#25913;&#20026;&#24322;&#27493;&#12290;</p>
<p><a href="https://gitee.com/liaoxuefeng/learn-java/raw/master/practices/Java%E6%95%99%E7%A8%8B/190.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.1264742167474528/30.%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F.1281319453589538/70.%E8%A7%82%E5%AF%9F%E8%80%85.1281319577321505/pattern-observer.zip">&#35266;&#23519;&#32773;&#27169;&#24335;&#32451;&#20064;</a></p>
<h3>&#23567;&#32467;</h3>
<p>&#35266;&#23519;&#32773;&#27169;&#24335;&#65292;&#21448;&#31216;&#21457;&#24067;-&#35746;&#38405;&#27169;&#24335;&#65292;&#26159;&#19968;&#31181;&#19968;&#23545;&#22810;&#30340;&#36890;&#30693;&#26426;&#21046;&#65292;&#20351;&#24471;&#21452;&#26041;&#26080;&#38656;&#20851;&#24515;&#23545;&#26041;&#65292;&#21482;&#20851;&#24515;&#36890;&#30693;&#26412;&#36523;&#12290;</p>
</div>

    <hr>

    <div class="x-wiki-prev-next uk-clearfix"></div>

    <div class="x-anchor x-comment-anchor"><a name="comments"></a></div>
							</div>
							<div id="x-content-bottom">
								<!-- __snippet__.contentBottom -->
								<div id="sponsor-a" class="uk-margin-bottom"></div>
								<!-- // __snippet__.contentBottom -->
							</div>
							<div id="x-content-comment">
								    <h3>Comments</h3>

    <ul id="x-comment-list" class="uk-comment-list">
    </ul>

    <h3>Make a comment</h3>

    <div class="x-display-if-not-signin">
        <p><button type="button" class="uk-button" onclick="showSignin()"><i class="uk-icon-signin"></i> Sign in to make a comment</button></p>
    </div>

    <div id="x-comment-area"></div>

							</div>
						</div>
											
