<div class="uk-flex-item-1" style="padding-left:15px; ">
							<div id="x-content-top">
								<!-- __snippet__.contentTop -->
																<!-- // __snippet__.contentTop -->
							</div>
							<div id="x-content">
								    <h4>UDP&#32534;&#31243;</h4>
    <div class="x-wiki-info">
    	<span>Reads: 14305</span>
    	<a href="/manage/wiki/wikipage_update?id=1319099802058785" target="_blank" class="x-can-edit uk-text-danger">Edit</a>
</div>

    <hr>

    <div class="x-wiki-content x-main-content">
<p>&#21644;TCP&#32534;&#31243;&#30456;&#27604;&#65292;UDP&#32534;&#31243;&#23601;&#31616;&#21333;&#24471;&#22810;&#65292;&#22240;&#20026;UDP&#27809;&#26377;&#21019;&#24314;&#36830;&#25509;&#65292;&#25968;&#25454;&#21253;&#20063;&#26159;&#19968;&#27425;&#25910;&#21457;&#19968;&#20010;&#65292;&#25152;&#20197;&#27809;&#26377;&#27969;&#30340;&#27010;&#24565;&#12290;</p>
<p>&#22312;Java&#20013;&#20351;&#29992;UDP&#32534;&#31243;&#65292;&#20173;&#28982;&#38656;&#35201;&#20351;&#29992;Socket&#65292;&#22240;&#20026;&#24212;&#29992;&#31243;&#24207;&#22312;&#20351;&#29992;UDP&#26102;&#24517;&#39035;&#25351;&#23450;&#32593;&#32476;&#25509;&#21475;&#65288;IP&#65289;&#21644;&#31471;&#21475;&#21495;&#12290;&#27880;&#24847;&#65306;UDP&#31471;&#21475;&#21644;TCP&#31471;&#21475;&#34429;&#28982;&#37117;&#20351;&#29992;0~65535&#65292;&#20294;&#20182;&#20204;&#26159;&#20004;&#22871;&#29420;&#31435;&#30340;&#31471;&#21475;&#65292;&#21363;&#19968;&#20010;&#24212;&#29992;&#31243;&#24207;&#29992;TCP&#21344;&#29992;&#20102;&#31471;&#21475;1234&#65292;&#19981;&#24433;&#21709;&#21478;&#19968;&#20010;&#24212;&#29992;&#31243;&#24207;&#29992;UDP&#21344;&#29992;&#31471;&#21475;1234&#12290;</p>
<h3>&#26381;&#21153;&#22120;&#31471;</h3>
<p>&#22312;&#26381;&#21153;&#22120;&#31471;&#65292;&#20351;&#29992;UDP&#20063;&#38656;&#35201;&#30417;&#21548;&#25351;&#23450;&#30340;&#31471;&#21475;&#12290;Java&#25552;&#20379;&#20102;<code>DatagramSocket</code>&#26469;&#23454;&#29616;&#36825;&#20010;&#21151;&#33021;&#65292;&#20195;&#30721;&#22914;&#19979;&#65306;</p>
<pre><code>DatagramSocket ds = new DatagramSocket(6666); // &#30417;&#21548;&#25351;&#23450;&#31471;&#21475;
for (;;) { // &#26080;&#38480;&#24490;&#29615;
    // &#25968;&#25454;&#32531;&#20914;&#21306;:
    byte[] buffer = new byte[1024];
    DatagramPacket packet = new DatagramPacket(buffer, buffer.length);
    ds.receive(packet); // &#25910;&#21462;&#19968;&#20010;UDP&#25968;&#25454;&#21253;
    // &#25910;&#21462;&#21040;&#30340;&#25968;&#25454;&#23384;&#20648;&#22312;buffer&#20013;&#65292;&#30001;packet.getOffset(), packet.getLength()&#25351;&#23450;&#36215;&#22987;&#20301;&#32622;&#21644;&#38271;&#24230;
    // &#23558;&#20854;&#25353;UTF-8&#32534;&#30721;&#36716;&#25442;&#20026;String:
    String s = new String(packet.getData(), packet.getOffset(), packet.getLength(), StandardCharsets.UTF_8);
    // &#21457;&#36865;&#25968;&#25454;:
    byte[] data = "ACK".getBytes(StandardCharsets.UTF_8);
    packet.setData(data);
    ds.send(packet);
}
</code></pre>
<p>&#26381;&#21153;&#22120;&#31471;&#39318;&#20808;&#20351;&#29992;&#22914;&#19979;&#35821;&#21477;&#22312;&#25351;&#23450;&#30340;&#31471;&#21475;&#30417;&#21548;UDP&#25968;&#25454;&#21253;&#65306;</p>
<pre><code>DatagramSocket ds = new DatagramSocket(6666);
</code></pre>
<p>&#22914;&#26524;&#27809;&#26377;&#20854;&#20182;&#24212;&#29992;&#31243;&#24207;&#21344;&#25454;&#36825;&#20010;&#31471;&#21475;&#65292;&#37027;&#20040;&#30417;&#21548;&#25104;&#21151;&#65292;&#25105;&#20204;&#23601;&#20351;&#29992;&#19968;&#20010;&#26080;&#38480;&#24490;&#29615;&#26469;&#22788;&#29702;&#25910;&#21040;&#30340;UDP&#25968;&#25454;&#21253;&#65306;</p>
<pre><code>for (;;) {
    ...
}
</code></pre>
<p>&#35201;&#25509;&#25910;&#19968;&#20010;UDP&#25968;&#25454;&#21253;&#65292;&#38656;&#35201;&#20934;&#22791;&#19968;&#20010;<code>byte[]</code>&#32531;&#20914;&#21306;&#65292;&#24182;&#36890;&#36807;<code>DatagramPacket</code>&#23454;&#29616;&#25509;&#25910;&#65306;</p>
<pre><code>byte[] buffer = new byte[1024];
DatagramPacket packet = new DatagramPacket(buffer, buffer.length);
ds.receive(packet);
</code></pre>
<p>&#20551;&#35774;&#25105;&#20204;&#25910;&#21462;&#21040;&#30340;&#26159;&#19968;&#20010;<code>String</code>&#65292;&#37027;&#20040;&#65292;&#36890;&#36807;<code>DatagramPacket</code>&#36820;&#22238;&#30340;<code>packet.getOffset()</code>&#21644;<code>packet.getLength()</code>&#30830;&#23450;&#25968;&#25454;&#22312;&#32531;&#20914;&#21306;&#30340;&#36215;&#27490;&#20301;&#32622;&#65306;</p>
<pre><code>String s = new String(packet.getData(), packet.getOffset(), packet.getLength(), StandardCharsets.UTF_8);
</code></pre>
<p>&#24403;&#26381;&#21153;&#22120;&#25910;&#21040;&#19968;&#20010;DatagramPacket&#21518;&#65292;&#36890;&#24120;&#24517;&#39035;&#31435;&#21051;&#22238;&#22797;&#19968;&#20010;&#25110;&#22810;&#20010;UDP&#21253;&#65292;&#22240;&#20026;&#23458;&#25143;&#31471;&#22320;&#22336;&#22312;DatagramPacket&#20013;&#65292;&#27599;&#27425;&#25910;&#21040;&#30340;DatagramPacket&#21487;&#33021;&#26159;&#19981;&#21516;&#30340;&#23458;&#25143;&#31471;&#65292;&#22914;&#26524;&#19981;&#22238;&#22797;&#65292;&#23458;&#25143;&#31471;&#23601;&#25910;&#19981;&#21040;&#20219;&#20309;UDP&#21253;&#12290;</p>
<p>&#21457;&#36865;UDP&#21253;&#20063;&#26159;&#36890;&#36807;<code>DatagramPacket</code>&#23454;&#29616;&#30340;&#65292;&#21457;&#36865;&#20195;&#30721;&#38750;&#24120;&#31616;&#21333;&#65306;</p>
<pre><code>byte[] data = ...
packet.setData(data);
ds.send(packet);
</code></pre>
<h3>&#23458;&#25143;&#31471;</h3>
<p>&#21644;&#26381;&#21153;&#22120;&#31471;&#30456;&#27604;&#65292;&#23458;&#25143;&#31471;&#20351;&#29992;UDP&#26102;&#65292;&#21482;&#38656;&#35201;&#30452;&#25509;&#21521;&#26381;&#21153;&#22120;&#31471;&#21457;&#36865;UDP&#21253;&#65292;&#28982;&#21518;&#25509;&#25910;&#36820;&#22238;&#30340;UDP&#21253;&#65306;</p>
<pre><code>DatagramSocket ds = new DatagramSocket();
ds.setSoTimeout(1000);
ds.connect(InetAddress.getByName("localhost"), 6666); // &#36830;&#25509;&#25351;&#23450;&#26381;&#21153;&#22120;&#21644;&#31471;&#21475;
// &#21457;&#36865;:
byte[] data = "Hello".getBytes();
DatagramPacket packet = new DatagramPacket(data, data.length);
ds.send(packet);
// &#25509;&#25910;:
byte[] buffer = new byte[1024];
packet = new DatagramPacket(buffer, buffer.length);
ds.receive(packet);
String resp = new String(packet.getData(), packet.getOffset(), packet.getLength());
ds.disconnect();
</code></pre>
<p>&#23458;&#25143;&#31471;&#25171;&#24320;&#19968;&#20010;<code>DatagramSocket</code>&#20351;&#29992;&#20197;&#19979;&#20195;&#30721;&#65306;</p>
<pre><code>DatagramSocket ds = new DatagramSocket();
ds.setSoTimeout(1000);
ds.connect(InetAddress.getByName("localhost"), 6666);
</code></pre>
<p>&#23458;&#25143;&#31471;&#21019;&#24314;<code>DatagramSocket</code>&#23454;&#20363;&#26102;&#24182;&#19981;&#38656;&#35201;&#25351;&#23450;&#31471;&#21475;&#65292;&#32780;&#26159;&#30001;&#25805;&#20316;&#31995;&#32479;&#33258;&#21160;&#25351;&#23450;&#19968;&#20010;&#24403;&#21069;&#26410;&#20351;&#29992;&#30340;&#31471;&#21475;&#12290;&#32039;&#25509;&#30528;&#65292;&#35843;&#29992;<code>setSoTimeout(1000)</code>&#35774;&#23450;&#36229;&#26102;1&#31186;&#65292;&#24847;&#24605;&#26159;&#21518;&#32493;&#25509;&#25910;UDP&#21253;&#26102;&#65292;&#31561;&#24453;&#26102;&#38388;&#26368;&#22810;&#19981;&#20250;&#36229;&#36807;1&#31186;&#65292;&#21542;&#21017;&#22312;&#27809;&#26377;&#25910;&#21040;UDP&#21253;&#26102;&#65292;&#23458;&#25143;&#31471;&#20250;&#26080;&#38480;&#31561;&#24453;&#19979;&#21435;&#12290;&#36825;&#19968;&#28857;&#21644;&#26381;&#21153;&#22120;&#31471;&#19981;&#19968;&#26679;&#65292;&#26381;&#21153;&#22120;&#31471;&#21487;&#20197;&#26080;&#38480;&#31561;&#24453;&#65292;&#22240;&#20026;&#23427;&#26412;&#26469;&#23601;&#34987;&#35774;&#35745;&#25104;&#38271;&#26102;&#38388;&#36816;&#34892;&#12290;</p>
<p>&#27880;&#24847;&#21040;&#23458;&#25143;&#31471;&#30340;<code>DatagramSocket</code>&#36824;&#35843;&#29992;&#20102;&#19968;&#20010;<code>connect()</code>&#26041;&#27861;&#8220;&#36830;&#25509;&#8221;&#21040;&#25351;&#23450;&#30340;&#26381;&#21153;&#22120;&#31471;&#12290;&#19981;&#26159;&#35828;UDP&#26159;&#26080;&#36830;&#25509;&#30340;&#21327;&#35758;&#21527;&#65311;&#20026;&#21861;&#36825;&#37324;&#38656;&#35201;<code>connect()</code>&#65311;</p>
<p>&#36825;&#20010;<code>connect()</code>&#26041;&#27861;&#19981;&#26159;&#30495;&#36830;&#25509;&#65292;&#23427;&#26159;&#20026;&#20102;&#22312;&#23458;&#25143;&#31471;&#30340;<code>DatagramSocket</code>&#23454;&#20363;&#20013;&#20445;&#23384;&#26381;&#21153;&#22120;&#31471;&#30340;IP&#21644;&#31471;&#21475;&#21495;&#65292;&#30830;&#20445;&#36825;&#20010;<code>DatagramSocket</code>&#23454;&#20363;&#21482;&#33021;&#24448;&#25351;&#23450;&#30340;&#22320;&#22336;&#21644;&#31471;&#21475;&#21457;&#36865;UDP&#21253;&#65292;&#19981;&#33021;&#24448;&#20854;&#20182;&#22320;&#22336;&#21644;&#31471;&#21475;&#21457;&#36865;&#12290;&#36825;&#20040;&#20570;&#19981;&#26159;UDP&#30340;&#38480;&#21046;&#65292;&#32780;&#26159;Java&#20869;&#32622;&#20102;&#23433;&#20840;&#26816;&#26597;&#12290;</p>
<p>&#22914;&#26524;&#23458;&#25143;&#31471;&#24076;&#26395;&#21521;&#20004;&#20010;&#19981;&#21516;&#30340;&#26381;&#21153;&#22120;&#21457;&#36865;UDP&#21253;&#65292;&#37027;&#20040;&#23427;&#24517;&#39035;&#21019;&#24314;&#20004;&#20010;<code>DatagramSocket</code>&#23454;&#20363;&#12290;</p>
<p>&#21518;&#32493;&#30340;&#25910;&#21457;&#25968;&#25454;&#21644;&#26381;&#21153;&#22120;&#31471;&#26159;&#19968;&#33268;&#30340;&#12290;&#36890;&#24120;&#26469;&#35828;&#65292;&#23458;&#25143;&#31471;&#24517;&#39035;&#20808;&#21457;UDP&#21253;&#65292;&#22240;&#20026;&#23458;&#25143;&#31471;&#19981;&#21457;UDP&#21253;&#65292;&#26381;&#21153;&#22120;&#31471;&#23601;&#26681;&#26412;&#19981;&#30693;&#36947;&#23458;&#25143;&#31471;&#30340;&#22320;&#22336;&#21644;&#31471;&#21475;&#21495;&#12290;</p>
<p>&#22914;&#26524;&#23458;&#25143;&#31471;&#35748;&#20026;&#36890;&#20449;&#32467;&#26463;&#65292;&#23601;&#21487;&#20197;&#35843;&#29992;<code>disconnect()</code>&#26029;&#24320;&#36830;&#25509;&#65306;</p>
<pre><code>ds.disconnect();
</code></pre>
<p>&#27880;&#24847;&#21040;<code>disconnect()</code>&#20063;&#19981;&#26159;&#30495;&#27491;&#22320;&#26029;&#24320;&#36830;&#25509;&#65292;&#23427;&#21482;&#26159;&#28165;&#38500;&#20102;&#23458;&#25143;&#31471;<code>DatagramSocket</code>&#23454;&#20363;&#35760;&#24405;&#30340;&#36828;&#31243;&#26381;&#21153;&#22120;&#22320;&#22336;&#21644;&#31471;&#21475;&#21495;&#65292;&#36825;&#26679;&#65292;<code>DatagramSocket</code>&#23454;&#20363;&#23601;&#21487;&#20197;&#36830;&#25509;&#21478;&#19968;&#20010;&#26381;&#21153;&#22120;&#31471;&#12290;</p>
<h3>&#32451;&#20064;</h3>
<p><a href="https://gitee.com/liaoxuefeng/learn-java/raw/master/practices/Java%E6%95%99%E7%A8%8B/150.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B.1255945371526048/30.UDP%E7%BC%96%E7%A8%8B.1319099802058785/network-datagram.zip">&#20351;&#29992;UDP&#23454;&#29616;&#26381;&#21153;&#22120;&#21644;&#23458;&#25143;&#31471;&#36890;&#20449;</a></p>
<h3>&#23567;&#32467;</h3>
<p>&#20351;&#29992;UDP&#21327;&#35758;&#36890;&#20449;&#26102;&#65292;&#26381;&#21153;&#22120;&#21644;&#23458;&#25143;&#31471;&#21452;&#26041;&#26080;&#38656;&#24314;&#31435;&#36830;&#25509;&#65306;</p>
<ul>
<li>&#26381;&#21153;&#22120;&#31471;&#29992;<code>DatagramSocket(port)</code>&#30417;&#21548;&#31471;&#21475;&#65307;</li>
<li>&#23458;&#25143;&#31471;&#20351;&#29992;<code>DatagramSocket.connect()</code>&#25351;&#23450;&#36828;&#31243;&#22320;&#22336;&#21644;&#31471;&#21475;&#65307;</li>
<li>&#21452;&#26041;&#36890;&#36807;<code>receive()</code>&#21644;<code>send()</code>&#35835;&#20889;&#25968;&#25454;&#65307;</li>
<li>
<code>DatagramSocket</code>&#27809;&#26377;IO&#27969;&#25509;&#21475;&#65292;&#25968;&#25454;&#34987;&#30452;&#25509;&#20889;&#20837;<code>byte[]</code>&#32531;&#20914;&#21306;&#12290;</li>
</ul>
</div>

    <hr>

    <div class="x-wiki-prev-next uk-clearfix"></div>

    <div class="x-anchor x-comment-anchor"><a name="comments"></a></div>
							</div>
							<div id="x-content-bottom">
								<!-- __snippet__.contentBottom -->
								<div id="sponsor-a" class="uk-margin-bottom"></div>
								<!-- // __snippet__.contentBottom -->
							</div>
							<div id="x-content-comment">
								    <h3>Comments</h3>

    <ul id="x-comment-list" class="uk-comment-list">
    </ul>

    <h3>Make a comment</h3>

    <div class="x-display-if-not-signin">
        <p><button type="button" class="uk-button" onclick="showSignin()"><i class="uk-icon-signin"></i> Sign in to make a comment</button></p>
    </div>

    <div id="x-comment-area"></div>

							</div>
						</div>
											
