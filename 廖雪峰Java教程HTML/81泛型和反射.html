<div class="uk-flex-item-1" style="padding-left:15px; ">
							<div id="x-content-top">
								<!-- __snippet__.contentTop -->
																<!-- // __snippet__.contentTop -->
							</div>
							<div id="x-content">
								    <h4>&#27867;&#22411;&#21644;&#21453;&#23556;</h4>
    <div class="x-wiki-info">
    	<span>Reads: 90499</span>
    	<a href="/manage/wiki/wikipage_update?id=1265105940850016" target="_blank" class="x-can-edit uk-text-danger">Edit</a>
</div>

    <hr>

    <div class="x-wiki-content x-main-content">
<p>Java&#30340;&#37096;&#20998;&#21453;&#23556;API&#20063;&#26159;&#27867;&#22411;&#12290;&#20363;&#22914;&#65306;<code>Class&lt;T&gt;</code>&#23601;&#26159;&#27867;&#22411;&#65306;</p>
<pre><code>// compile warning:
Class clazz = String.class;
String str = (String) clazz.newInstance();

// no warning:
Class&lt;String&gt; clazz = String.class;
String str = clazz.newInstance();
</code></pre>
<p>&#35843;&#29992;<code>Class</code>&#30340;<code>getSuperclass()</code>&#26041;&#27861;&#36820;&#22238;&#30340;<code>Class</code>&#31867;&#22411;&#26159;<code>Class&lt;? super T&gt;</code>&#65306;</p>
<pre><code>Class&lt;? super String&gt; sup = String.class.getSuperclass();
</code></pre>
<p>&#26500;&#36896;&#26041;&#27861;<code>Constructor&lt;T&gt;</code>&#20063;&#26159;&#27867;&#22411;&#65306;</p>
<pre><code>Class&lt;Integer&gt; clazz = Integer.class;
Constructor&lt;Integer&gt; cons = clazz.getConstructor(int.class);
Integer i = cons.newInstance(123);
</code></pre>
<p>&#25105;&#20204;&#21487;&#20197;&#22768;&#26126;&#24102;&#27867;&#22411;&#30340;&#25968;&#32452;&#65292;&#20294;&#19981;&#33021;&#29992;<code>new</code>&#25805;&#20316;&#31526;&#21019;&#24314;&#24102;&#27867;&#22411;&#30340;&#25968;&#32452;&#65306;</p>
<pre><code>Pair&lt;String&gt;[] ps = null; // ok
Pair&lt;String&gt;[] ps = new Pair&lt;String&gt;[2]; // compile error!
</code></pre>
<p>&#24517;&#39035;&#36890;&#36807;&#24378;&#21046;&#36716;&#22411;&#23454;&#29616;&#24102;&#27867;&#22411;&#30340;&#25968;&#32452;&#65306;</p>
<pre><code>@SuppressWarnings("unchecked")
Pair&lt;String&gt;[] ps = (Pair&lt;String&gt;[]) new Pair[2];
</code></pre>
<p>&#20351;&#29992;&#27867;&#22411;&#25968;&#32452;&#35201;&#29305;&#21035;&#23567;&#24515;&#65292;&#22240;&#20026;&#25968;&#32452;&#23454;&#38469;&#19978;&#22312;&#36816;&#34892;&#26399;&#27809;&#26377;&#27867;&#22411;&#65292;&#32534;&#35793;&#22120;&#21487;&#20197;&#24378;&#21046;&#26816;&#26597;&#21464;&#37327;<code>ps</code>&#65292;&#22240;&#20026;&#23427;&#30340;&#31867;&#22411;&#26159;&#27867;&#22411;&#25968;&#32452;&#12290;&#20294;&#26159;&#65292;&#32534;&#35793;&#22120;&#19981;&#20250;&#26816;&#26597;&#21464;&#37327;<code>arr</code>&#65292;&#22240;&#20026;&#23427;&#19981;&#26159;&#27867;&#22411;&#25968;&#32452;&#12290;&#22240;&#20026;&#36825;&#20004;&#20010;&#21464;&#37327;&#23454;&#38469;&#19978;&#25351;&#21521;&#21516;&#19968;&#20010;&#25968;&#32452;&#65292;&#25152;&#20197;&#65292;&#25805;&#20316;<code>arr</code>&#21487;&#33021;&#23548;&#33268;&#20174;<code>ps</code>&#33719;&#21462;&#20803;&#32032;&#26102;&#25253;&#38169;&#65292;&#20363;&#22914;&#65292;&#20197;&#19979;&#20195;&#30721;&#28436;&#31034;&#20102;&#19981;&#23433;&#20840;&#22320;&#20351;&#29992;&#24102;&#27867;&#22411;&#30340;&#25968;&#32452;&#65306;</p>
<pre><code>Pair[] arr = new Pair[2];
Pair&lt;String&gt;[] ps = (Pair&lt;String&gt;[]) arr;

ps[0] = new Pair&lt;String&gt;("a", "b");
arr[1] = new Pair&lt;Integer&gt;(1, 2);

// ClassCastException:
Pair&lt;String&gt; p = ps[1];
String s = p.getFirst();
</code></pre>
<p>&#35201;&#23433;&#20840;&#22320;&#20351;&#29992;&#27867;&#22411;&#25968;&#32452;&#65292;&#24517;&#39035;&#25172;&#25481;<code>arr</code>&#30340;&#24341;&#29992;&#65306;</p>
<pre><code>@SuppressWarnings("unchecked")
Pair&lt;String&gt;[] ps = (Pair&lt;String&gt;[]) new Pair[2];
</code></pre>
<p>&#19978;&#38754;&#30340;&#20195;&#30721;&#20013;&#65292;&#30001;&#20110;&#25343;&#19981;&#21040;&#21407;&#22987;&#25968;&#32452;&#30340;&#24341;&#29992;&#65292;&#23601;&#21482;&#33021;&#23545;&#27867;&#22411;&#25968;&#32452;<code>ps</code>&#36827;&#34892;&#25805;&#20316;&#65292;&#36825;&#31181;&#25805;&#20316;&#23601;&#26159;&#23433;&#20840;&#30340;&#12290;</p>
<p>&#24102;&#27867;&#22411;&#30340;&#25968;&#32452;&#23454;&#38469;&#19978;&#26159;&#32534;&#35793;&#22120;&#30340;&#31867;&#22411;&#25830;&#38500;&#65306;</p>
<pre><code>Pair[] arr = new Pair[2];
Pair&lt;String&gt;[] ps = (Pair&lt;String&gt;[]) arr;

System.out.println(ps.getClass() == Pair[].class); // true

String s1 = (String) arr[0].getFirst();
String s2 = ps[0].getFirst();
</code></pre>
<p>&#25152;&#20197;&#25105;&#20204;&#19981;&#33021;&#30452;&#25509;&#21019;&#24314;&#27867;&#22411;&#25968;&#32452;<code>T[]</code>&#65292;&#22240;&#20026;&#25830;&#25325;&#21518;&#20195;&#30721;&#21464;&#20026;<code>Object[]</code>&#65306;</p>
<pre><code>// compile error:
public class Abc&lt;T&gt; {
    T[] createArray() {
        return new T[5];
    }
}
</code></pre>
<p>&#24517;&#39035;&#20511;&#21161;<code>Class&lt;T&gt;</code>&#26469;&#21019;&#24314;&#27867;&#22411;&#25968;&#32452;&#65306;</p>
<pre><code>T[] createArray(Class&lt;T&gt; cls) {
    return (T[]) Array.newInstance(cls, 5);
}
</code></pre>
<p>&#25105;&#20204;&#36824;&#21487;&#20197;&#21033;&#29992;&#21487;&#21464;&#21442;&#25968;&#21019;&#24314;&#27867;&#22411;&#25968;&#32452;<code>T[]</code>&#65306;</p>
<pre><code>public class ArrayHelper {
    @SafeVarargs
    static &lt;T&gt; T[] asArray(T... objs) {
        return objs;
    }
}

String[] ss = ArrayHelper.asArray("a", "b", "c");
Integer[] ns = ArrayHelper.asArray(1, 2, 3);
</code></pre>
<h3>&#35880;&#24910;&#20351;&#29992;&#27867;&#22411;&#21487;&#21464;&#21442;&#25968;</h3>
<p>&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#30475;&#21040;&#65292;&#36890;&#36807;&#65306;</p>
<pre><code>static &lt;T&gt; T[] asArray(T... objs) {
    return objs;
}
</code></pre>
<p>&#20284;&#20046;&#21487;&#20197;&#23433;&#20840;&#22320;&#21019;&#24314;&#19968;&#20010;&#27867;&#22411;&#25968;&#32452;&#12290;&#20294;&#23454;&#38469;&#19978;&#65292;&#36825;&#31181;&#26041;&#27861;&#38750;&#24120;&#21361;&#38505;&#12290;&#20197;&#19979;&#20195;&#30721;&#26469;&#33258;&#12298;Effective Java&#12299;&#30340;&#31034;&#20363;&#65306;</p>
<pre><code class="language-x-java">import java.util.Arrays;

public class Main {
----
    public static void main(String[] args) {
        String[] arr = asArray("one", "two", "three");
        System.out.println(Arrays.toString(arr));
        // ClassCastException:
        String[] firstTwo = pickTwo("one", "two", "three");
        System.out.println(Arrays.toString(firstTwo));
    }

    static &lt;K&gt; K[] pickTwo(K k1, K k2, K k3) {
        return asArray(k1, k2);
    }

    static &lt;T&gt; T[] asArray(T... objs) {
        return objs;
    }
----
}
</code></pre>
<p>&#30452;&#25509;&#35843;&#29992;<code>asArray(T...)</code>&#20284;&#20046;&#27809;&#26377;&#38382;&#39064;&#65292;&#20294;&#26159;&#22312;&#21478;&#19968;&#20010;&#26041;&#27861;&#20013;&#65292;&#25105;&#20204;&#36820;&#22238;&#19968;&#20010;&#27867;&#22411;&#25968;&#32452;&#23601;&#20250;&#20135;&#29983;<code>ClassCastException</code>&#65292;&#21407;&#22240;&#36824;&#26159;&#22240;&#20026;&#25830;&#25325;&#27861;&#65292;&#22312;<code>pickTwo()</code>&#26041;&#27861;&#20869;&#37096;&#65292;&#32534;&#35793;&#22120;&#26080;&#27861;&#26816;&#27979;<code>K[]</code>&#30340;&#27491;&#30830;&#31867;&#22411;&#65292;&#22240;&#27492;&#36820;&#22238;&#20102;<code>Object[]</code>&#12290;</p>
<p>&#22914;&#26524;&#20180;&#32454;&#35266;&#23519;&#65292;&#21487;&#20197;&#21457;&#29616;&#32534;&#35793;&#22120;&#23545;&#25152;&#26377;&#21487;&#21464;&#27867;&#22411;&#21442;&#25968;&#37117;&#20250;&#21457;&#20986;&#35686;&#21578;&#65292;&#38500;&#38750;&#30830;&#35748;&#23436;&#20840;&#27809;&#26377;&#38382;&#39064;&#65292;&#25165;&#21487;&#20197;&#29992;<code>@SafeVarargs</code>&#28040;&#38500;&#35686;&#21578;&#12290;</p>
<pre><code class="language-!">&#22914;&#26524;&#22312;&#26041;&#27861;&#20869;&#37096;&#21019;&#24314;&#20102;&#27867;&#22411;&#25968;&#32452;&#65292;&#26368;&#22909;&#19981;&#35201;&#23558;&#23427;&#36820;&#22238;&#32473;&#22806;&#37096;&#20351;&#29992;&#12290;
</code></pre>
<p>&#26356;&#35814;&#32454;&#30340;&#35299;&#37322;&#35831;&#21442;&#32771;&#12298;<a href="https://www.oreilly.com/library/view/effective-java-3rd/9780134686097/">Effective Java</a>&#12299;&#8220;Item 32: Combine generics and varargs judiciously&#8221;&#12290;</p>
<h3>&#23567;&#32467;</h3>
<p>&#37096;&#20998;&#21453;&#23556;API&#26159;&#27867;&#22411;&#65292;&#20363;&#22914;&#65306;<code>Class&lt;T&gt;</code>&#65292;<code>Constructor&lt;T&gt;</code>&#65307;</p>
<p>&#21487;&#20197;&#22768;&#26126;&#24102;&#27867;&#22411;&#30340;&#25968;&#32452;&#65292;&#20294;&#19981;&#33021;&#30452;&#25509;&#21019;&#24314;&#24102;&#27867;&#22411;&#30340;&#25968;&#32452;&#65292;&#24517;&#39035;&#24378;&#21046;&#36716;&#22411;&#65307;</p>
<p>&#21487;&#20197;&#36890;&#36807;<code>Array.newInstance(Class&lt;T&gt;, int)</code>&#21019;&#24314;<code>T[]</code>&#25968;&#32452;&#65292;&#38656;&#35201;&#24378;&#21046;&#36716;&#22411;&#65307;</p>
<p>&#21516;&#26102;&#20351;&#29992;&#27867;&#22411;&#21644;&#21487;&#21464;&#21442;&#25968;&#26102;&#38656;&#35201;&#29305;&#21035;&#23567;&#24515;&#12290;</p>
</div>

    <hr>

    <div class="x-wiki-prev-next uk-clearfix"></div>

    <div class="x-anchor x-comment-anchor"><a name="comments"></a></div>
							</div>
							<div id="x-content-bottom">
								<!-- __snippet__.contentBottom -->
								<div id="sponsor-a" class="uk-margin-bottom"></div>
								<!-- // __snippet__.contentBottom -->
							</div>
							<div id="x-content-comment">
								    <h3>Comments</h3>

    <ul id="x-comment-list" class="uk-comment-list">
    </ul>

    <h3>Make a comment</h3>

    <div class="x-display-if-not-signin">
        <p><button type="button" class="uk-button" onclick="showSignin()"><i class="uk-icon-signin"></i> Sign in to make a comment</button></p>
    </div>

    <div id="x-comment-area"></div>

							</div>
						</div>
											
