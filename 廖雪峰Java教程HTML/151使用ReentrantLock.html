<div class="uk-flex-item-1" style="padding-left:15px; ">
							<div id="x-content-top">
								<!-- __snippet__.contentTop -->
																<!-- // __snippet__.contentTop -->
							</div>
							<div id="x-content">
								    <h4>&#20351;&#29992;ReentrantLock</h4>
    <div class="x-wiki-info">
    	<span>Reads: 20990</span>
    	<a href="/manage/wiki/wikipage_update?id=1306580960149538" target="_blank" class="x-can-edit uk-text-danger">Edit</a>
</div>

    <hr>

    <div class="x-wiki-content x-main-content">
<p>&#20174;Java 5&#24320;&#22987;&#65292;&#24341;&#20837;&#20102;&#19968;&#20010;&#39640;&#32423;&#30340;&#22788;&#29702;&#24182;&#21457;&#30340;<code>java.util.concurrent</code>&#21253;&#65292;&#23427;&#25552;&#20379;&#20102;&#22823;&#37327;&#26356;&#39640;&#32423;&#30340;&#24182;&#21457;&#21151;&#33021;&#65292;&#33021;&#22823;&#22823;&#31616;&#21270;&#22810;&#32447;&#31243;&#31243;&#24207;&#30340;&#32534;&#20889;&#12290;</p>
<p>&#25105;&#20204;&#30693;&#36947;Java&#35821;&#35328;&#30452;&#25509;&#25552;&#20379;&#20102;<code>synchronized</code>&#20851;&#38190;&#23383;&#29992;&#20110;&#21152;&#38145;&#65292;&#20294;&#36825;&#31181;&#38145;&#19968;&#26159;&#24456;&#37325;&#65292;&#20108;&#26159;&#33719;&#21462;&#26102;&#24517;&#39035;&#19968;&#30452;&#31561;&#24453;&#65292;&#27809;&#26377;&#39069;&#22806;&#30340;&#23581;&#35797;&#26426;&#21046;&#12290;</p>
<p><code>java.util.concurrent.locks</code>&#21253;&#25552;&#20379;&#30340;<code>ReentrantLock</code>&#29992;&#20110;&#26367;&#20195;<code>synchronized</code>&#21152;&#38145;&#65292;&#25105;&#20204;&#26469;&#30475;&#19968;&#19979;&#20256;&#32479;&#30340;<code>synchronized</code>&#20195;&#30721;&#65306;</p>
<pre><code>public class Counter {
    private int count;

    public void add(int n) {
        synchronized(this) {
            count += n;
        }
    }
}
</code></pre>
<p>&#22914;&#26524;&#29992;<code>ReentrantLock</code>&#26367;&#20195;&#65292;&#21487;&#20197;&#25226;&#20195;&#30721;&#25913;&#36896;&#20026;&#65306;</p>
<pre><code>public class Counter {
    private final Lock lock = new ReentrantLock();
    private int count;

    public void add(int n) {
        lock.lock();
        try {
            count += n;
        } finally {
            lock.unlock();
        }
    }
}
</code></pre>
<p>&#22240;&#20026;<code>synchronized</code>&#26159;Java&#35821;&#35328;&#23618;&#38754;&#25552;&#20379;&#30340;&#35821;&#27861;&#65292;&#25152;&#20197;&#25105;&#20204;&#19981;&#38656;&#35201;&#32771;&#34385;&#24322;&#24120;&#65292;&#32780;<code>ReentrantLock</code>&#26159;Java&#20195;&#30721;&#23454;&#29616;&#30340;&#38145;&#65292;&#25105;&#20204;&#23601;&#24517;&#39035;&#20808;&#33719;&#21462;&#38145;&#65292;&#28982;&#21518;&#22312;<code>finally</code>&#20013;&#27491;&#30830;&#37322;&#25918;&#38145;&#12290;</p>
<p>&#39038;&#21517;&#24605;&#20041;&#65292;<code>ReentrantLock</code>&#26159;&#21487;&#37325;&#20837;&#38145;&#65292;&#23427;&#21644;<code>synchronized</code>&#19968;&#26679;&#65292;&#19968;&#20010;&#32447;&#31243;&#21487;&#20197;&#22810;&#27425;&#33719;&#21462;&#21516;&#19968;&#20010;&#38145;&#12290;</p>
<p>&#21644;<code>synchronized</code>&#19981;&#21516;&#30340;&#26159;&#65292;<code>ReentrantLock</code>&#21487;&#20197;&#23581;&#35797;&#33719;&#21462;&#38145;&#65306;</p>
<pre><code>if (lock.tryLock(1, TimeUnit.SECONDS)) {
    try {
        ...
    } finally {
        lock.unlock();
    }
}
</code></pre>
<p>&#19978;&#36848;&#20195;&#30721;&#22312;&#23581;&#35797;&#33719;&#21462;&#38145;&#30340;&#26102;&#20505;&#65292;&#26368;&#22810;&#31561;&#24453;1&#31186;&#12290;&#22914;&#26524;1&#31186;&#21518;&#20173;&#26410;&#33719;&#21462;&#21040;&#38145;&#65292;<code>tryLock()</code>&#36820;&#22238;<code>false</code>&#65292;&#31243;&#24207;&#23601;&#21487;&#20197;&#20570;&#19968;&#20123;&#39069;&#22806;&#22788;&#29702;&#65292;&#32780;&#19981;&#26159;&#26080;&#38480;&#31561;&#24453;&#19979;&#21435;&#12290;</p>
<p>&#25152;&#20197;&#65292;&#20351;&#29992;<code>ReentrantLock</code>&#27604;&#30452;&#25509;&#20351;&#29992;<code>synchronized</code>&#26356;&#23433;&#20840;&#65292;&#32447;&#31243;&#22312;<code>tryLock()</code>&#22833;&#36133;&#30340;&#26102;&#20505;&#19981;&#20250;&#23548;&#33268;&#27515;&#38145;&#12290;</p>
<h3>&#23567;&#32467;</h3>
<p><code>ReentrantLock</code>&#21487;&#20197;&#26367;&#20195;<code>synchronized</code>&#36827;&#34892;&#21516;&#27493;&#65307;</p>
<p><code>ReentrantLock</code>&#33719;&#21462;&#38145;&#26356;&#23433;&#20840;&#65307;</p>
<p>&#24517;&#39035;&#20808;&#33719;&#21462;&#21040;&#38145;&#65292;&#20877;&#36827;&#20837;<code>try {...}</code>&#20195;&#30721;&#22359;&#65292;&#26368;&#21518;&#20351;&#29992;<code>finally</code>&#20445;&#35777;&#37322;&#25918;&#38145;&#65307;</p>
<p>&#21487;&#20197;&#20351;&#29992;<code>tryLock()</code>&#23581;&#35797;&#33719;&#21462;&#38145;&#12290;</p>
</div>

    <hr>

    <div class="x-wiki-prev-next uk-clearfix"></div>

    <div class="x-anchor x-comment-anchor"><a name="comments"></a></div>
							</div>
							<div id="x-content-bottom">
								<!-- __snippet__.contentBottom -->
								<div id="sponsor-a" class="uk-margin-bottom"></div>
								<!-- // __snippet__.contentBottom -->
							</div>
							<div id="x-content-comment">
								    <h3>Comments</h3>

    <ul id="x-comment-list" class="uk-comment-list">
    </ul>

    <h3>Make a comment</h3>

    <div class="x-display-if-not-signin">
        <p><button type="button" class="uk-button" onclick="showSignin()"><i class="uk-icon-signin"></i> Sign in to make a comment</button></p>
    </div>

    <div id="x-comment-area"></div>

							</div>
						</div>
											
